{"meta":{"title":"米花の小窝","subtitle":"四季是我一生的诗","description":"2021，干巴爹","author":"zhou251","url":"https://zhou251.top","root":"/"},"pages":[{"title":"404 Not Found：该页无法显示","date":"un55fin55","updated":"un22fin22","comments":true,"path":"/404.html","permalink":"https://zhou251.top/404.html","excerpt":"","text":"404"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"about/index.html","permalink":"https://zhou251.top/about/index.html","excerpt":"","text":"😎 关于我 .milky { font-family: \"Arial Rounded MT Bold\", \"Helvetica Rounded\", Arial, sans-serif; font-size: 25px; letter-spacing: 0.1em; color: #333333; font-weight: 700; padding: 10px 20px; border-radius: 20px; background: linear-gradient(rgb(255, 102, 102) 0px, rgb(255, 102, 51) 100%); } 编号89757为您服务 请您按提示点击按钮"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":false,"path":"bb/index.html","permalink":"https://zhou251.top/bb/index.html","excerpt":"","text":"🍑 碎碎念 .milky { font-family: \"Arial Rounded MT Bold\", \"Helvetica Rounded\", Arial, sans-serif; font-size: 25px; letter-spacing: 0.1em; color: #333333; font-weight: 700; padding: 10px 20px; border-radius: 20px; background: linear-gradient(rgb(255, 102, 102) 0px, rgb(255, 102, 51) 100%); } 😶此说说通过📱手机微信发出，记录我的生活和思考。","author":"zhou251"},{"title":"categories","date":"un55fin55","updated":"un22fin22","comments":true,"path":"categories/index.html","permalink":"https://zhou251.top/categories/index.html","excerpt":"","text":"","author":null},{"title":"","date":"un11fin11","updated":"un22fin22","comments":true,"path":"documentation/index.html","permalink":"https://zhou251.top/documentation/index.html","excerpt":"","text":"📚 文档中心 .milky { font-family: \"Arial Rounded MT Bold\", \"Helvetica Rounded\", Arial, sans-serif; font-size: 25px; letter-spacing: 0.1em; color: #333333; font-weight: 700; padding: 10px 20px; border-radius: 20px; background: linear-gradient(rgb(255, 102, 102) 0px, rgb(255, 102, 51) 100%); }","author":"zhou251"},{"title":"gonggao","date":"un66fin66","updated":"un22fin22","comments":true,"path":"gonggao/index.html","permalink":"https://zhou251.top/gonggao/index.html","excerpt":"","text":"asdasdasfasfas","author":"zhou251"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"guestbook/index.html","permalink":"https://zhou251.top/guestbook/index.html","excerpt":"","text":"💬留言板 😘 是我，是我，就是我！ 说给你听 挑选中... 有什么想说的，有什么想问，就在下方留言吧，收到我会第一时间回复！请尽情灌水吧！😉 $.get(\"https://v1.hitokoto.cn?c=i&c=j\", function (data, status) { if (status == 'success') { $('#poem').html(data.hitokoto); if (data.from_who != null) { $('#info').html(data.from_who + \" · \" + \"《 \" + data.from + \" 》\"); } else { $('#info').html(data.from); } } else { $('#poem').html(\"获取出错啦\"); } }); .milky { font-family: \"Arial Rounded MT Bold\", \"Helvetica Rounded\", Arial, sans-serif; font-size: 25px; letter-spacing: 0.1em; color: #333333; font-weight: 700; padding: 10px 20px; border-radius: 20px; background: linear-gradient(rgb(255, 102, 102) 0px, rgb(255, 102, 51) 100%); } .poem-wrap { position: relative; width: 730px; max-width: 80%; border: 2px solid #797979; border-top: 0; text-align: center; margin: 80px auto; } .poem-wrap h1 { position: relative; margin-top: -20px; display: inline-block; letter-spacing: 4px; color: #797979; border-bottom: none; } .poem-wrap p { width: 70%; margin: auto; line-height: 30px; color: #797979; } .poem-wrap p#poem { text-align: center; font-size: 25px; } .poem-wrap p#info { text-align: center; font-size: 15px; margin: 15px auto; } .poem-border { position: absolute; height: 2px; width: 27%; background-color: #797979; } .poem-right { right: 0; } .poem-left { left: 0; } @media (max-width: 685px) { .poem-border { width: 18%; } } @media (max-width: 500px) { .poem-wrap { margin-top: 60px; margin-bottom: 20px; border-top: 2px solid #797979; } .poem-wrap h1 { margin: 20px 6px; } .poem-border { display: none; } }"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"lovetest/index.html","permalink":"https://zhou251.top/lovetest/index.html","excerpt":"","text":"给你的一封信 本页面采用HTML5编辑，目前您的浏览器无法显示，请换成谷歌(Chrome)或者火狐(Firefox)浏览器，或者其他游览器的最新版本。 亲爱的宝宝，我爱你 我知道我不会甜言蜜语， 但是我会用行动证明一切 你说我啰嗦， 有些东西因为越在乎所以越怕失去 因为我太爱你了，所以我害怕失去你 因为我太爱你了，所以我对你总啰嗦 希望可以执子之手，与子偕老 如果上天让我许三个愿望， 第一个是今生今世和你在一起， 第二个是再生再世和你在一起， 第三个是永生永世和你不分离 -- 爱你的老公 亲爱的，我喜欢你 已经是…… (function(){ var canvas = $('#canvas'); if (!canvas[0].getContext) { $(\"#error\").show(); return false; } var width = canvas.width(); var height = canvas.height(); canvas.attr(\"width\", width); canvas.attr(\"height\", height); var opts = { seed: { x: width / 2 - 20, color: \"rgb(190, 26, 37)\", scale: 2 }, branch: [ [535, 680, 570, 250, 500, 200, 30, 100, [ [540, 500, 455, 417, 340, 400, 13, 100, [ [450, 435, 434, 430, 394, 395, 2, 40] ]], [550, 445, 600, 356, 680, 345, 12, 100, [ [578, 400, 648, 409, 661, 426, 3, 80] ]], [539, 281, 537, 248, 534, 217, 3, 40], [546, 397, 413, 247, 328, 244, 9, 80, [ [427, 286, 383, 253, 371, 205, 2, 40], [498, 345, 435, 315, 395, 330, 4, 60] ]], [546, 357, 608, 252, 678, 221, 6, 100, [ [590, 293, 646, 277, 648, 271, 2, 80] ]] ]] ], bloom: { num: 700, width: 1080, height: 650, }, footer: { width: 1200, height: 5, speed: 10, } } var tree = new Tree(canvas[0], width, height, opts); var seed = tree.seed; var foot = tree.footer; var hold = 1; canvas.click(function(e) { var offset = canvas.offset(), x, y; x = e.pageX - offset.left; y = e.pageY - offset.top; if (seed.hover(x, y)) { hold = 0; canvas.unbind(\"click\"); canvas.unbind(\"mousemove\"); canvas.removeClass('hand'); } }).mousemove(function(e){ var offset = canvas.offset(), x, y; x = e.pageX - offset.left; y = e.pageY - offset.top; canvas.toggleClass('hand', seed.hover(x, y)); }); var seedAnimate = eval(Jscex.compile(\"async\", function () { seed.draw(); while (hold) { $await(Jscex.Async.sleep(10)); } while (seed.canScale()) { seed.scale(0.95); $await(Jscex.Async.sleep(10)); } while (seed.canMove()) { seed.move(0, 2); foot.draw(); $await(Jscex.Async.sleep(10)); } })); var growAnimate = eval(Jscex.compile(\"async\", function () { do { tree.grow(); $await(Jscex.Async.sleep(10)); } while (tree.canGrow()); })); var flowAnimate = eval(Jscex.compile(\"async\", function () { do { tree.flower(2); $await(Jscex.Async.sleep(10)); } while (tree.canFlower()); })); var moveAnimate = eval(Jscex.compile(\"async\", function () { tree.snapshot(\"p1\", 240, 0, 610, 680); while (tree.move(\"p1\", 500, 0)) { foot.draw(); $await(Jscex.Async.sleep(10)); } foot.draw(); tree.snapshot(\"p2\", 500, 0, 610, 680); // 会有闪烁不得意这样做, (＞﹏＜) canvas.parent().css(\"background\", \"url(\" + tree.toDataURL('image/png') + \")\"); canvas.css(\"background\", \"#ffe\"); $await(Jscex.Async.sleep(300)); canvas.css(\"background\", \"none\"); })); var jumpAnimate = eval(Jscex.compile(\"async\", function () { var ctx = tree.ctx; while (true) { tree.ctx.clearRect(0, 0, width, height); tree.jump(); foot.draw(); $await(Jscex.Async.sleep(25)); } })); var textAnimate = eval(Jscex.compile(\"async\", function () { var together = new Date(); together.setFullYear(2010,1 , 15); //时间年月日 together.setHours(16); //小时 together.setMinutes(53); //分钟 together.setSeconds(0); //秒前一位 together.setMilliseconds(2); //秒第二位 $(\"#code\").show().typewriter(); $(\"#clock-box\").fadeIn(500); while (true) { timeElapse(together); $await(Jscex.Async.sleep(1000)); } })); var runAsync = eval(Jscex.compile(\"async\", function () { $await(seedAnimate()); $await(growAnimate()); $await(flowAnimate()); $await(moveAnimate()); textAnimate().start(); $await(jumpAnimate()); })); runAsync().start(); })();"},{"title":"","date":"un11fin11","updated":"un22fin22","comments":true,"path":"photos/index.html","permalink":"https://zhou251.top/photos/index.html","excerpt":"","text":"🍂 相册 .milky { font-family: \"Arial Rounded MT Bold\", \"Helvetica Rounded\", Arial, sans-serif; font-size: 25px; letter-spacing: 0.1em; color: #333333; font-weight: 700; padding: 10px 20px; border-radius: 20px; background: linear-gradient(rgb(255, 102, 102) 0px, rgb(255, 102, 51) 100%); } 📸camera⛰️风景🖥️电脑壁纸📱手机壁纸待续。。。待续。。。宇宙 宇宙 宇宙 宇宙 宇宙 宇宙 宇宙 宇宙 宇宙 宇宙 宇宙","author":"zhou251"},{"title":"","date":"un11fin11","updated":"un22fin22","comments":true,"path":"resources/index.html","permalink":"https://zhou251.top/resources/index.html","excerpt":"","text":"👀 资源合集 .milky { font-family: \"Arial Rounded MT Bold\", \"Helvetica Rounded\", Arial, sans-serif; font-size: 25px; letter-spacing: 0.1em; color: #333333; font-weight: 700; padding: 10px 20px; border-radius: 20px; background: linear-gradient(rgb(255, 102, 102) 0px, rgb(255, 102, 51) 100%); } 🥝一个好用的图标网站阿里巴巴矢量图标库https://www.iconfont.cn/","author":"zhou251"},{"title":"tags","date":"un55fin55","updated":"un22fin22","comments":true,"path":"tags/index.html","permalink":"https://zhou251.top/tags/index.html","excerpt":"","text":"","author":null},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"lovetest/file/default.css","permalink":"https://zhou251.top/lovetest/file/default.css","excerpt":"","text":"/* build time:Tue Feb 23 2021 17:22:09 GMT+0800 (GMT+08:00)*/ body{margin:0;padding:0;background:#ffe;font-size:14px;font-family:'微软雅黑','宋体',sans-serif;color:#231f20;overflow:auto}a{color:#000;font-size:14px}#main{width:100%}#wrap{position:relative;margin:0 auto;width:1100px;height:680px;margin-top:10px}#text{width:272px;height:560px;left:188px;top:80px;position:absolute}#code{display:none;font-size:16px}#clock-box{position:absolute;left:60px;top:550px;font-size:28px;display:none}#clock-box a{font-size:28px;text-decoration:none}#clock{margin-left:48px}#clock .digit{font-size:64px}#canvas{margin:0 auto;width:1100px;height:680px}#error{margin:0 auto;text-align:center;margin-top:60px;display:none}.hand{cursor:pointer}.say{margin-left:5px}.space{margin-right:150px} /* rebuild by neat */"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"lovetest/file/functions.js","permalink":"https://zhou251.top/lovetest/file/functions.js","excerpt":"","text":"/* * http://love.hackerzhou.me */ // variables var $win = $(window); var clientWidth = $win.width(); var clientHeight = $win.height(); $(window).resize(function() { var newWidth = $win.width(); var newHeight = $win.height(); if (newWidth != clientWidth && newHeight != clientHeight) { location.replace(location); } }); (function($) { $.fn.typewriter = function() { this.each(function() { var $ele = $(this), str = $ele.html(), progress = 0; $ele.html(''); var timer = setInterval(function() { var current = str.substr(progress, 1); if (current == '', progress) + 1; } else { progress++; } $ele.html(str.substring(0, progress) + (progress & 1 ? '_' : '')); if (progress >= str.length) { clearInterval(timer); } }, 75); }); return this; }; })(jQuery); function timeElapse(date){ var current = Date(); var seconds = (Date.parse(current) - Date.parse(date)) / 1000; var days = Math.floor(seconds / (3600 * 24)); seconds = seconds % (3600 * 24); var hours = Math.floor(seconds / 3600); if (hours < 10) { hours = \"0\" + hours; } seconds = seconds % 3600; var minutes = Math.floor(seconds / 60); if (minutes < 10) { minutes = \"0\" + minutes; } seconds = seconds % 60; if (seconds < 10) { seconds = \"0\" + seconds; } var result = \"第 \" + days + \" 天 \" + hours + \" 小时 \" + minutes + \" 分钟 \" + seconds + \" 秒\"; $(\"#clock\").html(result); }"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"lovetest/file/jscex-async-powerpack.min.js","permalink":"https://zhou251.top/lovetest/file/jscex-async-powerpack.min.js","excerpt":"","text":"(function(){var m=function(j){if(j.length"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"lovetest/file/jscex-async.min.js","permalink":"https://zhou251.top/lovetest/file/jscex-async.min.js","excerpt":"","text":"(function(){var k=function(){};k.prototype={isCancellation:!0,message:\"The task has been cancelled.\"};typeof __jscex__async__taskIdSeed===\"undefined\"&&(__jscex__async__taskIdSeed=0);var l=function(b){return typeof b.start===\"function\"&&typeof b.addEventListener===\"function\"&&typeof b.removeEventListener===\"function\"&&typeof b.complete===\"function\"},j=function(b){if(!b.modules.async){var d=function(){};d.prototype={register:function(a){this.isCancellationRequested&&a();if(!this._handlers)this._handlers= [];this._handlers.push(a)},unregister:function(a){this._handlers&&(a=this._handlers.indexOf(a),a>=0&&this._handlers.splice(a,1))},cancel:function(){if(!this.isCancellationRequested){this.isCancellationRequested=!0;var a=this._handlers;delete this._handlers;for(var f=0;f"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"lovetest/file/jscex-builderbase.min.js","permalink":"https://zhou251.top/lovetest/file/jscex-builderbase.min.js","excerpt":"","text":"(function(){var j=function(){};j.prototype={Loop:function(b,c,a,d){return{next:function(e,i){var f=function(b){a.next(e,function(a,e){if(a==\"normal\"||a==\"continue\")g(b);else if(a==\"throw\"||a==\"return\")i(a,e);else if(a==\"break\")i(\"normal\");else throw Error('Invalid type for \"Loop\": '+a);})},g=function(a){try{c&&!a&&c.call(e),!b||b.call(e)?f(!1):i(\"normal\")}catch(d){i(\"throw\",d)}};d?f(!0):g(!0)}}},Delay:function(b){return{next:function(c,a){try{b.call(c).next(c,a)}catch(d){a(\"throw\",d)}}}},Combine:function(b, c){return{next:function(a,d){b.next(a,function(b,i,f){if(b==\"normal\")try{c.next(a,d)}catch(g){d(\"throw\",g)}else d(b,i,f)})}}},Return:function(b){return{next:function(c,a){a(\"return\",b)}}},Normal:function(){return{next:function(b,c){c(\"normal\")}}},Break:function(){return{next:function(b,c){c(\"break\")}}},Continue:function(){return{next:function(b,c){c(\"continue\")}}},Throw:function(b){return{next:function(c,a){a(\"throw\",b)}}},Try:function(b,c,a){return{next:function(d,e){b.next(d,function(b,f,g){if(b!= \"throw\"||!c)a?a.next(d,function(a,c,d){a==\"normal\"?e(b,f,g):e(a,c,d)}):e(b,f,g);else if(c){var h;try{h=c.call(d,f)}catch(j){a?a.next(d,function(a,b,c){a==\"normal\"?e(\"throw\",j):e(a,b,c)}):e(\"throw\",j)}h&&h.next(d,function(b,c,f){b==\"throw\"?a?a.next(d,function(a,d,g){a==\"normal\"?e(b,c,f):e(a,d,g)}):e(b,c,f):a?a.next(d,function(a,d,g){a==\"normal\"?e(b,c,f):e(a,d,g)}):e(b,c,f)})}else a.next(d,function(a,c,d){a==\"normal\"?e(b,f,g):e(a,c,d)})})}}}};var h=function(b){if(!b.modules)b.modules={};if(!b.modules.builderbase)b.modules.builderbase= !0,b.BuilderBase=j},k=typeof define===\"function\"&&!define.amd,l=typeof require===\"function\"&&typeof define===\"function\"&&define.amd;if(typeof require===\"function\"&&typeof module!==\"undefined\"&&module.exports)module.exports.init=h;else if(k)define(\"jscex-builderbase\",function(b,c,a){a.exports.init=h});else if(l)define(\"jscex-builderbase\",function(){return{init:h}});else{if(typeof Jscex===\"undefined\")throw Error('Missing the root object, please load \"jscex\" module first.');h(Jscex)}})();"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"lovetest/file/jscex.min.js","permalink":"https://zhou251.top/lovetest/file/jscex.min.js","excerpt":"","text":"(function(){var b={DEBUG:1,INFO:2,WARN:3,ERROR:4},d=function(){this.level=b.WARN};d.prototype={log:function(a){try{console.log(a)}catch(b){}},debug:function(a){this.level"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"photos/hexo-next/data.json","permalink":"https://zhou251.top/photos/hexo-next/data.json","excerpt":"","text":"{\"list\":[{\"date\":\"2021-02\",\"arr\":{\"year\":2021,\"month\":2,\"link\":[\"2021-02-15_gurdan.jpg\",\"2021-02-15_suiyi.png\",\"2021-02-15_weixin.png\"],\"text\":[\"gurdan\",\"suiyi\",\"weixin\"],\"type\":[\"image\",\"image\",\"image\"]}}]}"},{"title":"相册","slug":"photos","date":"un22fin22","updated":"un22fin22","comments":false,"path":"photos/hexo-next/index.html","permalink":"https://zhou251.top/photos/hexo-next/index.html","excerpt":"","text":"Photos 待续 图片正在加载中… (function() { var loadScript = function(path) { var $script = document.createElement('script') document.getElementsByTagName('body')[0].appendChild($script) $script.setAttribute('src', path) } setTimeout(function() { loadScript('./ins.js') }, 0) })()"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"photos/hexo-next/ins.css","permalink":"https://zhou251.top/photos/hexo-next/ins.css","excerpt":"","text":"/* build time:Tue Feb 23 2021 17:22:09 GMT+0800 (GMT+08:00)*/ #post-instagram{padding:30px}#post-instagram .article-entry{padding-right:0}.instagram{position:relative;min-height:500px}.instagram img{width:100%}.instagram .year{font-size:16px}.instagram .open-ins{padding:10px 0;color:#cdcdcd}.instagram .open-ins:hover{color:#657b83}.instagram .year{display:inline}.instagram .thumb{width:25%;height:0;padding-bottom:25%;position:relative;display:inline-block;text-align:center;background:#ededed;outline:1px solid #ddd}.instagram .thumb a{position:relative}.instagram .album h1 em{font-style:normal;font-size:14px;margin-left:10px}.instagram .album ul{display:flex;flex-wrap:wrap;clear:both;width:100%;text-align:left}.instagram .album li{list-style:none;display:inline-block;box-sizing:border-box;padding:0 5px;margin-bottom:-10px;height:0;width:25%;position:relative;padding-bottom:25%}.instagram .album li:before{display:none}.instagram .album div.img-box{position:absolute;width:90%;height:90%;-webkit-box-shadow:0 1px 0 rgba(255,255,255,.4),0 1px 0 1px rgba(255,255,255,.1);-moz-box-shadow:0 1px 0 rgba(255,255,255,.4),0 1px 0 1px rgba(255,255,255,.1);box-shadow:0 1px 0 rgba(255,255,255,.4),0 1px 0 1px rgba(255,255,255,.1)}.instagram .album div.img-box img{width:100%;height:100%;position:absolute;z-index:2}.instagram .album div.img-box .img-bg{position:absolute;top:0;left:0;bottom:0;width:100%;margin:-5px;padding:5px;-webkit-box-shadow:0 0 0 1px rgba(0,0,0,.04),0 1px 5px rgba(0,0,0,.1);-moz-box-shadow:0 0 0 1px rgba(0,0,0,.04),0 1px 5px rgba(0,0,0,.1);box-shadow:0 0 0 1px rgba(0,0,0,.04),0 1px 5px rgba(0,0,0,.1);-webkit-transition:all .15s ease-out .1s;-moz-transition:all .15s ease-out .1s;-o-transition:all .15s ease-out .1s;transition:all .15s ease-out .1s;opacity:.2;cursor:pointer;display:block;z-index:3}.instagram .album div.img-box .icon{font-size:14px;position:absolute;left:50%;top:50%;margin-left:-7px;margin-top:-7px;color:#999;z-index:1}.instagram .album div.img-box .img-bg:hover{opacity:0}.photos-btn-wrap{border-bottom:1px solid #e5e5e5;margin-bottom:20px}.photos-btn{font-size:16px;color:#333;margin-bottom:-4px;padding:5px 8px 3px}.photos-btn.active{color:#08c;border:1px solid #e5e5e5;border-bottom:5px solid #fff}@media screen and (max-width:600px){.instagram .thumb{width:50%;padding-bottom:50%}.instagram .album li{width:100%;position:relative;padding-bottom:100%;text-align:center}.instagram .album div.img-box{margin:0;width:90%;height:90%}} /* rebuild by neat */"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"photos/hexo-next/lazyload.min.js","permalink":"https://zhou251.top/photos/hexo-next/lazyload.min.js","excerpt":"","text":"/*! * An jQuery | zepto plugin for lazy loading images. * author -> jieyou * see https://github.com/jieyou/lazyload * use some tuupola's code https://github.com/tuupola/jquery_lazyload (BSD) * use component's throttle https://github.com/component/throttle (MIT) */ !function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(window.jQuery||window.Zepto)}(function(a){function g(){}function h(a,b){var e;return e=b._$container==d?(\"innerHeight\"in c?c.innerHeight:d.height())+d.scrollTop():b._$container.offset().top+b._$container.height(),e=b.offset().left+e.threshold+b.width()}function l(a,b){var c=0;a.each(function(d){function g(){f.trigger(\"_lazyload_appear\"),c=0}var f=a.eq(d);if(!(f.width()b.failure_limit)return!1}else g()})}function m(a){return a.filter(function(b){return!a.eq(b)._lazyload_loadStarted})}function n(a,b){function h(){f=0,g=+new Date,e=a.apply(c,d),c=null,d=null}var c,d,e,f,g=0;return function(){c=this,d=arguments;var a=new Date-g;return f||(a>=b?h():f=setTimeout(h,b-a)),e}}var f,c=window,d=a(c),e={threshold:0,failure_limit:0,event:\"scroll\",effect:\"show\",effect_params:null,container:c,data_attribute:\"original\",data_srcset_attribute:\"original-srcset\",skip_invisible:!0,appear:g,load:g,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:g,no_fake_img_loader:!1,placeholder_data_img:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\",placeholder_real_img:\"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png\"};f=function(){var a=Object.prototype.toString;return function(b){return a.call(b).replace(\"[object \",\"\").replace(\"]\",\"\")}}(),a.fn.hasOwnProperty(\"lazyload\")||(a.fn.lazyload=function(b){var i,j,k,h=this;return a.isPlainObject(b)||(b={}),a.each(e,function(g,h){var i=f(b[g]);-1!=a.inArray(g,[\"threshold\",\"failure_limit\",\"check_appear_throttle_time\"])?\"String\"==i?b[g]=parseInt(b[g],10):\"Number\"!=i&&(b[g]=h):\"container\"==g?(b._$container=b.hasOwnProperty(g)?b[g]==c||b[g]==document?d:a(b[g]):d,delete b.container):!e.hasOwnProperty(g)||b.hasOwnProperty(g)&&i==f(e[g])||(b[g]=h)}),i=\"scroll\"==b.event,k=0==b.check_appear_throttle_time?l:n(l,b.check_appear_throttle_time),j=i||\"scrollstart\"==b.event||\"scrollstop\"==b.event,h.each(function(c){var e=this,f=h.eq(c),i=f.attr(\"src\"),k=f.attr(\"data-\"+b.data_attribute),l=b.url_rewriter_fn==g?k:b.url_rewriter_fn.call(e,f,k),n=f.attr(\"data-\"+b.data_srcset_attribute),o=f.is(\"img\");return 1==f._lazyload_loadStarted||i==l?(f._lazyload_loadStarted=!0,h=m(h),void 0):(f._lazyload_loadStarted=!1,o&&!i&&f.one(\"error\",function(){f.attr(\"src\",b.placeholder_real_img)}).attr(\"src\",b.placeholder_data_img),f.one(\"_lazyload_appear\",function(){function i(){d&&f.hide(),o?(n&&f.attr(\"srcset\",n),l&&f.attr(\"src\",l)):f.css(\"background-image\",'url(\"'+l+'\")'),d&&f[b.effect].apply(f,c?b.effect_params:[]),h=m(h)}var d,c=a.isArray(b.effect_params);f._lazyload_loadStarted||(d=\"show\"!=b.effect&&a.fn[b.effect]&&(!b.effect_params||c&&0==b.effect_params.length),b.appear!=g&&b.appear.call(e,f,h.length,b),f._lazyload_loadStarted=!0,b.no_fake_img_loader||n?(b.load!=g&&f.one(\"load\",function(){b.load.call(e,f,h.length,b)}),i()):a(\"\").one(\"load\",function(){i(),b.load!=g&&b.load.call(e,f,h.length,b)}).attr(\"src\",l))}),j||f.on(b.event,function(){f._lazyload_loadStarted||f.trigger(\"_lazyload_appear\")}),void 0)}),j&&b._$container.on(b.event,function(){k(h,b)}),d.on(\"resize load\",function(){k(h,b)}),a(function(){k(h,b)}),this})});"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"lovetest/file/love.js","permalink":"https://zhou251.top/lovetest/file/love.js","excerpt":"","text":"(function(window){ function random(min, max) { return min + Math.floor(Math.random() * (max - min + 1)); } function bezier(cp, t) { var p1 = cp[0].mul((1 - t) * (1 - t)); var p2 = cp[1].mul(2 * t * (1 - t)); var p3 = cp[2].mul(t * t); return p1.add(p2).add(p3); } function inheart(x, y, r) { // x^2+(y-(x^2)^(1/3))^2 = 1 // http://www.wolframalpha.com/input/?i=x%5E2%2B%28y-%28x%5E2%29%5E%281%2F3%29%29%5E2+%3D+1 var z = ((x / r) * (x / r) + (y / r) * (y / r) - 1) * ((x / r) * (x / r) + (y / r) * (y / r) - 1) * ((x / r) * (x / r) + (y / r) * (y / r) - 1) - (x / r) * (x / r) * (y / r) * (y / r) * (y / r); return z < 0; } Point = function(x, y) { this.x = x || 0; this.y = y || 0; } Point.prototype = { clone: function() { return new Point(this.x, this.y); }, add: function(o) { p = this.clone(); p.x += o.x; p.y += o.y; return p; }, sub: function(o) { p = this.clone(); p.x -= o.x; p.y -= o.y; return p; }, div: function(n) { p = this.clone(); p.x /= n; p.y /= n; return p; }, mul: function(n) { p = this.clone(); p.x *= n; p.y *= n; return p; } } Heart = function() { // x = 16 sin^3 t // y = 13 cos t - 5 cos 2t - 2 cos 3t - cos 4t // http://www.wolframalpha.com/input/?i=x+%3D+16+sin%5E3+t%2C+y+%3D+(13+cos+t+-+5+cos+2t+-+2+cos+3t+-+cos+4t) var points = [], x, y, t; for (var i = 10; i < 30; i += 0.2) { t = i / Math.PI; x = 16 * Math.pow(Math.sin(t), 3); y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t); points.push(new Point(x, y)); } this.points = points; this.length = points.length; } Heart.prototype = { get: function(i, scale) { return this.points[i].mul(scale || 1); } } Seed = function(tree, point, scale, color) { this.tree = tree; var scale = scale || 1 var color = color || '#FF0000'; this.heart = { point : point, scale : scale, color : color, figure : new Heart(), } this.cirle = { point : point, scale : scale, color : color, radius : 5, } } Seed.prototype = { draw: function() { this.drawHeart(); this.drawText(); }, addPosition: function(x, y) { this.cirle.point = this.cirle.point.add(new Point(x, y)); }, canMove: function() { return this.cirle.point.y < (this.tree.height + 20); }, move: function(x, y) { this.clear(); this.drawCirle(); this.addPosition(x, y); }, canScale: function() { return this.heart.scale > 0.2; }, setHeartScale: function(scale) { this.heart.scale *= scale; }, scale: function(scale) { this.clear(); this.drawCirle(); this.drawHeart(); this.setHeartScale(scale); }, drawHeart: function() { var ctx = this.tree.ctx, heart = this.heart; var point = heart.point, color = heart.color, scale = heart.scale; ctx.save(); ctx.fillStyle = color; ctx.translate(point.x, point.y); ctx.beginPath(); ctx.moveTo(0, 0); for (var i = 0; i < heart.figure.length; i++) { var p = heart.figure.get(i, scale); ctx.lineTo(p.x, -p.y); } ctx.closePath(); ctx.fill(); ctx.restore(); }, drawCirle: function() { var ctx = this.tree.ctx, cirle = this.cirle; var point = cirle.point, color = cirle.color, scale = cirle.scale, radius = cirle.radius; ctx.save(); ctx.fillStyle = color; ctx.translate(point.x, point.y); ctx.scale(scale, scale); ctx.beginPath(); ctx.moveTo(0, 0); ctx.arc(0, 0, radius, 0, 2 * Math.PI); ctx.closePath(); ctx.fill(); ctx.restore(); }, drawText: function() { var ctx = this.tree.ctx, heart = this.heart; var point = heart.point, color = heart.color, scale = heart.scale; ctx.save(); ctx.strokeStyle = color; ctx.fillStyle = color; ctx.translate(point.x, point.y); ctx.scale(scale, scale); ctx.moveTo(0, 0); ctx.lineTo(15, 15); ctx.lineTo(60, 15); ctx.stroke(); ctx.moveTo(0, 0); ctx.scale(0.75, 0.75); ctx.font = \"12px 微软雅黑,Verdana\"; // 字号肿么没有用? (ˉ(∞)ˉ) ctx.fillText(\"Come Baby\", 23, 10); ctx.restore(); }, clear: function() { var ctx = this.tree.ctx, cirle = this.cirle; var point = cirle.point, scale = cirle.scale, radius = 26; var w = h = (radius * scale); ctx.clearRect(point.x - w, point.y - h, 4 * w, 4 * h); }, hover: function(x, y) { var ctx = this.tree.ctx; var pixel = ctx.getImageData(x, y, 1, 1); return pixel.data[3] == 255 } } Footer = function(tree, width, height, speed) { this.tree = tree; this.point = new Point(tree.seed.heart.point.x, tree.height - height / 2); this.width = width; this.height = height; this.speed = speed || 2; this.length = 0; } Footer.prototype = { draw: function() { var ctx = this.tree.ctx, point = this.point; var len = this.length / 2; ctx.save(); ctx.strokeStyle = 'rgb(35, 31, 32)'; ctx.lineWidth = this.height; ctx.lineCap = 'round'; ctx.lineJoin = 'round'; ctx.translate(point.x, point.y); ctx.beginPath(); ctx.moveTo(0, 0); ctx.lineTo(len, 0); ctx.lineTo(-len, 0); ctx.stroke(); ctx.restore(); if (this.length < this.width) { this.length += this.speed; } } } Tree = function(canvas, width, height, opt) { this.canvas = canvas; this.ctx = canvas.getContext('2d'); this.width = width; this.height = height; this.opt = opt || {}; this.record = {}; this.initSeed(); this.initFooter(); this.initBranch(); this.initBloom(); } Tree.prototype = { initSeed: function() { var seed = this.opt.seed || {}; var x = seed.x || this.width / 2; var y = seed.y || this.height / 2; var point = new Point(x, y); var color = seed.color || '#FF0000'; var scale = seed.scale || 1; this.seed = new Seed(this, point, scale, color); }, initFooter: function() { var footer = this.opt.footer || {}; var width = footer.width || this.width; var height = footer.height || 5; var speed = footer.speed || 2; this.footer = new Footer(this, width, height, speed); }, initBranch: function() { var branchs = this.opt.branch || [] this.branchs = []; this.addBranchs(branchs); }, initBloom: function() { var bloom = this.opt.bloom || {}; var cache = [], num = bloom.num || 500, width = bloom.width || this.width, height = bloom.height || this.height, figure = this.seed.heart.figure; var r = 240, x, y; for (var i = 0; i < num; i++) { cache.push(this.createBloom(width, height, r, figure)); } this.blooms = []; this.bloomsCache = cache; }, toDataURL: function(type) { return this.canvas.toDataURL(type); }, draw: function(k) { var s = this, ctx = s.ctx; var rec = s.record[k]; if (!rec) { return ; } var point = rec.point, image = rec.image; ctx.save(); ctx.putImageData(image, point.x, point.y); ctx.restore(); }, addBranch: function(branch) { this.branchs.push(branch); }, addBranchs: function(branchs){ var s = this, b, p1, p2, p3, r, l, c; for (var i = 0; i < branchs.length; i++) { b = branchs[i]; p1 = new Point(b[0], b[1]); p2 = new Point(b[2], b[3]); p3 = new Point(b[4], b[5]); r = b[6]; l = b[7]; c = b[8] s.addBranch(new Branch(s, p1, p2, p3, r, l, c)); } }, removeBranch: function(branch) { var branchs = this.branchs; for (var i = 0; i < branchs.length; i++) { if (branchs[i] === branch) { branchs.splice(i, 1); } } }, canGrow: function() { return !!this.branchs.length; }, grow: function() { var branchs = this.branchs; for (var i = 0; i < branchs.length; i++) { var branch = branchs[i]; if (branch) { branch.grow(); } } }, addBloom: function (bloom) { this.blooms.push(bloom); }, removeBloom: function (bloom) { var blooms = this.blooms; for (var i = 0; i < blooms.length; i++) { if (blooms[i] === bloom) { blooms.splice(i, 1); } } }, createBloom: function(width, height, radius, figure, color, alpha, angle, scale, place, speed) { var x, y; while (true) { x = random(20, width - 20); y = random(20, height - 20); if (inheart(x - width / 2, height - (height - 40) / 2 - y, radius)) { return new Bloom(this, new Point(x, y), figure, color, alpha, angle, scale, place, speed); } } }, canFlower: function() { return !!this.blooms.length; }, flower: function(num) { var s = this, blooms = s.bloomsCache.splice(0, num); for (var i = 0; i < blooms.length; i++) { s.addBloom(blooms[i]); } blooms = s.blooms; for (var j = 0; j < blooms.length; j++) { blooms[j].flower(); } }, snapshot: function(k, x, y, width, height) { var ctx = this.ctx; var image = ctx.getImageData(x, y, width, height); this.record[k] = { image: image, point: new Point(x, y), width: width, height: height } }, setSpeed: function(k, speed) { this.record[k || \"move\"].speed = speed; }, move: function(k, x, y) { var s = this, ctx = s.ctx; var rec = s.record[k || \"move\"]; var point = rec.point, image = rec.image, speed = rec.speed || 10, width = rec.width, height = rec.height; i = point.x + speed < x ? point.x + speed : x; j = point.y + speed < y ? point.y + speed : y; ctx.save(); ctx.clearRect(point.x, point.y, width, height); ctx.putImageData(image, i, j); ctx.restore(); rec.point = new Point(i, j); rec.speed = speed * 0.95; if (rec.speed < 2) { rec.speed = 2; } return i < x || j < y; }, jump: function() { var s = this, blooms = s.blooms; if (blooms.length) { for (var i = 0; i < blooms.length; i++) { blooms[i].jump(); } } if ((blooms.length && blooms.length < 3) || !blooms.length) { var bloom = this.opt.bloom || {}, width = bloom.width || this.width, height = bloom.height || this.height, figure = this.seed.heart.figure; var r = 240, x, y; for (var i = 0; i < random(1,2); i++) { blooms.push(this.createBloom(width / 2 + width, height, r, figure, null, 1, null, 1, new Point(random(-100,600), 720), random(200,300))); } } } } Branch = function(tree, point1, point2, point3, radius, length, branchs) { this.tree = tree; this.point1 = point1; this.point2 = point2; this.point3 = point3; this.radius = radius; this.length = length || 100; this.len = 0; this.t = 1 / (this.length - 1); this.branchs = branchs || []; } Branch.prototype = { grow: function() { var s = this, p; if (s.len 1) { s.tree.removeBloom(s); } }, draw: function() { var s = this, ctx = s.tree.ctx, figure = s.figure; ctx.save(); ctx.fillStyle = s.color; ctx.globalAlpha = s.alpha; ctx.translate(s.point.x, s.point.y); ctx.scale(s.scale, s.scale); ctx.rotate(s.angle); ctx.beginPath(); ctx.moveTo(0, 0); for (var i = 0; i < figure.length; i++) { var p = figure.get(i); ctx.lineTo(p.x, -p.y); } ctx.closePath(); ctx.fill(); ctx.restore(); }, jump: function() { var s = this, height = s.tree.height; if (s.point.x < -20 || s.point.y > height + 20) { s.tree.removeBloom(s); } else { s.draw(); s.point = s.place.sub(s.point).div(s.speed).add(s.point); s.angle += 0.05; s.speed -= 1; } } } window.random = random; window.bezier = bezier; window.Point = Point; window.Tree = Tree; })(window);"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"photos/hexo-next/ins.js","permalink":"https://zhou251.top/photos/hexo-next/ins.js","excerpt":"","text":"/******/ (function(modules) { // webpackBootstrap /******/ // The module cache /******/ var installedModules = {}; /******/ /******/ // The require function /******/ function __webpack_require__(moduleId) { /******/ /******/ // Check if module is in cache /******/ if (installedModules[moduleId]) /******/ return installedModules[moduleId].exports; /******/ /******/ // Create a new module (and put it into the cache) /******/ var module = installedModules[moduleId] = { /******/ exports: {}, /******/ id: moduleId, /******/ loaded: false /******/ }; /******/ /******/ // Execute the module function /******/ modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); /******/ /******/ // Flag the module as loaded /******/ module.loaded = true; /******/ /******/ // Return the exports of the module /******/ return module.exports; /******/ } /******/ /******/ /******/ // expose the modules object (__webpack_modules__) /******/ __webpack_require__.m = modules; /******/ /******/ // expose the module cache /******/ __webpack_require__.c = installedModules; /******/ /******/ // __webpack_public_path__ /******/ __webpack_require__.p = \"/dist/\"; /******/ /******/ // Load entry module and return exports /******/ return __webpack_require__(0); /******/ }) /************************************************************************/ /******/ ([ /* 0 */ /***/ function(module, exports, __webpack_require__) { 'use strict'; __webpack_require__(1); var _view = __webpack_require__(2); var _view2 = _interopRequireDefault(_view); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } /** * @name impush-client * @description 这个项目让我发家致富… * @date 2016-12-1 */ var _collection = []; var _count = 0; var searchData; function addMask(elem) { var rect = elem.getBoundingClientRect(); var style = getComputedStyle(elem, null); var mask = document.createElement('i'); mask.className = 'icon-film'; mask.style.color = '#fff'; mask.style.fontSize = '26px'; mask.style.position = 'absolute'; mask.style.right = '10px'; mask.style.bottom = '10px'; mask.style.zIndex = 1; elem.parentNode.appendChild(mask); } var createVideoIncon = function createVideoIncon() { var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]'); for (var i = 0, len = $videoImg.length; i < len; i++) { addMask($videoImg[i]); } }; var render = function render(res) { var ulTmpl = \"\"; for (var j = 0, len2 = res.list.length; j < len2; j++) { var data = res.list[j].arr; var liTmpl = \"\"; for (var i = 0, len = data.link.length; i < len; i++) { var minSrc = 'https://raw.githubusercontent.com/zhou251/Blog_Photo_Album/main/min_photos/' + data.link[i]; var src = 'https://raw.githubusercontent.com/zhou251/Blog_Photo_Album/main/photos/' + data.link[i]; var type = data.type[i]; var target = src + (type === 'video' ? '.mp4' : '.jpg'); src += ''; liTmpl += '\\ \\ \\ \\ ' + data.text[i] + '\\ '; } ulTmpl = ulTmpl + '' + data.year + '年' + data.month + '月\\ ' + liTmpl + '\\ '; } document.querySelector('.instagram').innerHTML = '' + ulTmpl + ''; createVideoIncon(); _view2.default.init(); }; var replacer = function replacer(str) { var arr = str.split(\"/\"); return \"/assets/ins/\" + arr[arr.length - 1]; }; var ctrler = function ctrler(data) { var imgObj = {}; for (var i = 0, len = data.length; i < len; i++) { var y = data[i].y; var m = data[i].m; var src = replacer(data[i].src); var text = data[i].text; var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m); if (imgObj[key]) { imgObj[key].srclist.push(src); imgObj[key].text.push(text); } else { imgObj[key] = { year: y, month: m, srclist: [src], text: [text] }; } } render(imgObj); }; function loadData(success) { if (!searchData) { var xhr = new XMLHttpRequest(); xhr.open('GET', './data.json?t=' + +new Date(), true); xhr.onload = function() { if (this.status >= 200 && this.status < 300) { var res = JSON.parse(this.response); searchData = res; success(searchData); } else { console.error(this.statusText); } }; xhr.onerror = function() { console.error(this.statusText); }; xhr.send(); } else { success(searchData); } } var Ins = { init: function init() { loadData(function(data) { render(data); }); } }; Ins.init(); // export default impush; /***/ }, /* 1 */ /***/ function(module, exports, __webpack_require__) { /* WEBPACK VAR INJECTION */ (function(global) { 'use strict'; var inViewport = __webpack_require__(3); var lazyAttrs = ['data-src']; global.lzld = lazyload(); // Provide libs using getAttribute early to get the good src // and not the fake data-src replaceGetAttribute('Image'); replaceGetAttribute('IFrame'); function registerLazyAttr(attr) { if (indexOf.call(lazyAttrs, attr) === -1) { lazyAttrs.push(attr); } } function lazyload(opts) { opts = merge({ 'offset': 333, 'src': 'data-src', 'container': false }, opts || {}); if (typeof opts.src === 'string') { registerLazyAttr(opts.src); } var elts = []; function show(elt) { var src = findRealSrc(elt); if (src) { elt.src = src; } elt.setAttribute('data-lzled', true); elts[indexOf.call(elts, elt)] = null; } function findRealSrc(elt) { if (typeof opts.src === 'function') { return opts.src(elt); } return elt.getAttribute(opts.src); } function register(elt) { elt.onload = null; elt.removeAttribute('onload'); elt.onerror = null; elt.removeAttribute('onerror'); if (indexOf.call(elts, elt) === -1) { inViewport(elt, opts, show); } } return register; } function replaceGetAttribute(elementName) { var fullname = 'HTML' + elementName + 'Element'; if (fullname in global === false) { return; } var original = global[fullname].prototype.getAttribute; global[fullname].prototype.getAttribute = function(name) { if (name === 'src') { var realSrc; for (var i = 0, max = lazyAttrs.length; i < max; i++) { realSrc = original.call(this, lazyAttrs[i]); if (realSrc) { break; } } return realSrc || original.call(this, name); } // our own lazyloader will go through theses lines // because we use getAttribute(opts.src) return original.call(this, name); }; } function merge(defaults, opts) { for (var name in defaults) { if (opts[name] === undefined) { opts[name] = defaults[name]; } } return opts; } // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html function indexOf(value) { for (var i = this.length; i-- && this[i] !== value;) {} return i; } module.exports = lazyload; // export default impush; /* WEBPACK VAR INJECTION */ }.call(exports, (function() { return this; }()))) /***/ }, /* 2 */ /***/ function(module, exports) { 'use strict'; var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) { // parse slide data (url, title, size ...) from DOM elements // (children of gallerySelector) var parseThumbnailElements = function parseThumbnailElements(el) { el = el.parentNode.parentNode; var thumbElements = el.getElementsByClassName('thumb'), numNodes = thumbElements.length, items = [], figureEl, linkEl, size, type, // video or not target, item; for (var i = 0; i < numNodes; i++) { figureEl = thumbElements[i]; // // include only element nodes if (figureEl.nodeType !== 1) { continue; } linkEl = figureEl.children[0]; // size = linkEl.getAttribute('data-size').split('x'); type = linkEl.getAttribute('data-type'); target = linkEl.getAttribute('data-target'); // create slide object item = { src: linkEl.getAttribute('href'), w: parseInt(size[0], 10), h: parseInt(size[1], 10) }; if (figureEl.children.length > 1) { item.title = figureEl.children[1].innerHTML; } if (linkEl.children.length > 0) { item.msrc = linkEl.children[0].getAttribute('src'); item.type = type; item.target = target; item.html = ''; if (type === 'video') { //item.src = null; } } item.el = figureEl; // save link to element for getThumbBoundsFn items.push(item); } return items; }; // find nearest parent element var closest = function closest(el, fn) { return el && (fn(el) ? el : closest(el.parentNode, fn)); }; // triggers when user clicks on thumbnail var onThumbnailsClick = function onThumbnailsClick(e) { e = e || window.event; e.preventDefault ? e.preventDefault() : e.returnValue = false; var eTarget = e.target || e.srcElement; // find root element of slide var clickedListItem = closest(eTarget, function(el) { return el.tagName && el.tagName.toUpperCase() === 'FIGURE'; }); if (!clickedListItem) { return; } // find index of clicked item by looping through all child nodes // alternatively, you may define index via data- attribute var clickedGallery = clickedListItem.parentNode, // childNodes = clickedListItem.parentNode.childNodes, // numChildNodes = childNodes.length, childNodes = document.getElementsByClassName('thumb'), numChildNodes = childNodes.length, nodeIndex = 0, index; for (var i = 0; i < numChildNodes; i++) { if (childNodes[i].nodeType !== 1) { continue; } if (childNodes[i] === clickedListItem) { index = nodeIndex; break; } nodeIndex++; } if (index >= 0) { // open PhotoSwipe if valid index found openPhotoSwipe(index, clickedGallery); } return false; }; // parse picture index and gallery index from URL (#&pid=1&gid=2) var photoswipeParseHash = function photoswipeParseHash() { var hash = window.location.hash.substring(1), params = {}; if (hash.length < 5) { return params; } var vars = hash.split('&'); for (var i = 0; i < vars.length; i++) { if (!vars[i]) { continue; } var pair = vars[i].split('='); if (pair.length < 2) { continue; } params[pair[0]] = pair[1]; } if (params.gid) { params.gid = parseInt(params.gid, 10); } return params; }; var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) { var pswpElement = document.querySelectorAll('.pswp')[0], gallery, options, items; items = parseThumbnailElements(galleryElement); // define options (if needed) options = { // define gallery index (for URL) galleryUID: galleryElement.getAttribute('data-pswp-uid'), getThumbBoundsFn: function getThumbBoundsFn(index) { // See Options -> getThumbBoundsFn section of documentation for more info var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail pageYScroll = window.pageYOffset || document.documentElement.scrollTop, rect = thumbnail.getBoundingClientRect(); return { x: rect.left, y: rect.top + pageYScroll, w: rect.width }; } }; // PhotoSwipe opened from URL if (fromURL) { if (options.galleryPIDs) { // parse real index when custom PIDs are used // http://photoswipe.com/documentation/faq.html#custom-pid-in-url for (var j = 0; j < items.length; j++) { if (items[j].pid == index) { options.index = j; break; } } } else { // in URL indexes start from 1 options.index = parseInt(index, 10) - 1; } } else { options.index = parseInt(index, 10); } // exit if index not found if (isNaN(options.index)) { return; } if (disableAnimation) { options.showAnimationDuration = 0; } // Pass data to PhotoSwipe and initialize it gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options); gallery.init(); var $tempVideo; var stopVideoHandle = function stopVideoHandle() { if ($tempVideo) { $tempVideo.remove(); $tempVideo = null; } }; var changeHandle = function changeHandle() { var item = gallery.currItem; stopVideoHandle(); if (item.type === 'video') { var $ctn = item.container; var style = $ctn.getElementsByClassName('pswp__img')[0].style; var $video = document.createElement('video'); $video.setAttribute('autoplay', 'autoplay'); $video.setAttribute('controls', 'controls'); $video.setAttribute('src', item.target); $video.style.width = style.width; $video.style.height = style.height; $video.style.position = 'absolute'; $video.style.zIndex = 2; $tempVideo = $video; $ctn.appendChild($video); } }; gallery.listen('initialZoomIn', changeHandle); gallery.listen('afterChange', changeHandle); gallery.listen('initialZoomOut', stopVideoHandle); }; // loop through all gallery elements and bind events var galleryElements = document.querySelectorAll(gallerySelector); for (var i = 0, l = galleryElements.length; i < l; i++) { galleryElements[i].setAttribute('data-pswp-uid', i + 1); galleryElements[i].onclick = onThumbnailsClick; } // Parse URL and open gallery if it contains #&pid=3&gid=1 var hashData = photoswipeParseHash(); if (hashData.pid && hashData.gid) { openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true); } }; var Viewer = function() { function init() { initPhotoSwipeFromDOM('.photos'); } return { init: init }; }(); module.exports = Viewer; /***/ }, /* 3 */ /***/ function(module, exports) { /* WEBPACK VAR INJECTION */ (function(global) { module.exports = inViewport; var instances = []; var supportsMutationObserver = typeof global.MutationObserver === 'function'; function inViewport(elt, params, cb) { var opts = { container: global.document.body, offset: 0 }; if (params === undefined || typeof params === 'function') { cb = params; params = {}; } var container = opts.container = params.container || opts.container; var offset = opts.offset = params.offset || opts.offset; for (var i = 0; i < instances.length; i++) { if (instances[i].container === container) { return instances[i].isInViewport(elt, offset, cb); } } return instances[ instances.push(createInViewport(container)) - 1 ].isInViewport(elt, offset, cb); } function addEvent(el, type, fn) { if (el.attachEvent) { el.attachEvent('on' + type, fn); } else { el.addEventListener(type, fn, false); } } function debounce(func, wait, immediate) { var timeout; return function() { var context = this, args = arguments; var callNow = immediate && !timeout; clearTimeout(timeout); timeout = setTimeout(later, wait); if (callNow) func.apply(context, args); function later() { timeout = null; if (!immediate) func.apply(context, args); } }; } // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708 var contains = function() { if (!global.document) { return true; } return global.document.documentElement.compareDocumentPosition ? function(a, b) { return !!(a.compareDocumentPosition(b) & 16); } : global.document.documentElement.contains ? function(a, b) { return a !== b && (a.contains ? a.contains(b) : false); } : function(a, b) { while (b = b.parentNode) { if (b === a) { return true; } } return false; }; } function createInViewport(container) { var watches = createWatches(); var scrollContainer = container === global.document.body ? global : container; var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15); addEvent(scrollContainer, 'scroll', debouncedCheck); if (scrollContainer === global) { addEvent(global, 'resize', debouncedCheck); } if (supportsMutationObserver) { observeDOM(watches, container, debouncedCheck); } // failsafe check, every 200ms we check for visible images // usecase: a hidden parent containing eleements // when the parent becomes visible, we have no event that the children // became visible setInterval(debouncedCheck, 150); function isInViewport(elt, offset, cb) { if (!cb) { return isVisible(elt, offset); } var remote = createRemote(elt, offset, cb); remote.watch(); return remote; } function createRemote(elt, offset, cb) { function watch() { watches.add(elt, offset, cb); } function dispose() { watches.remove(elt); } return { watch: watch, dispose: dispose }; } function watchInViewport(elt, offset, cb) { if (isVisible(elt, offset)) { watches.remove(elt); cb(elt); } } function isVisible(elt, offset) { if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) { return false; } // Check if the element is visible // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js if (!elt.offsetWidth || !elt.offsetHeight) { return false; } var eltRect = elt.getBoundingClientRect(); var viewport = {}; if (container === global.document.body) { viewport = { top: -offset, left: -offset, right: global.document.documentElement.clientWidth + offset, bottom: global.document.documentElement.clientHeight + offset }; } else { var containerRect = container.getBoundingClientRect(); viewport = { top: containerRect.top - offset, left: containerRect.left - offset, right: containerRect.right + offset, bottom: containerRect.bottom + offset }; } // The element must overlap with the visible part of the viewport var visible = ( (eltRect.right > viewport.left) && (eltRect.left < viewport.right) && (eltRect.bottom > viewport.top) && (eltRect.top < viewport.bottom) ); return visible; } return { container: container, isInViewport: isInViewport }; } function createWatches() { var watches = []; function add(elt, offset, cb) { if (!isWatched(elt)) { watches.push([elt, offset, cb]); } } function remove(elt) { var pos = indexOf(elt); if (pos !== -1) { watches.splice(pos, 1); } } function indexOf(elt) { for (var i = watches.length - 1; i >= 0; i--) { if (watches[i][0] === elt) { return i; } } return -1; } function isWatched(elt) { return indexOf(elt) !== -1; } function checkAll(cb) { return function() { for (var i = watches.length - 1; i >= 0; i--) { cb.apply(this, watches[i]); } }; } return { add: add, remove: remove, isWatched: isWatched, checkAll: checkAll }; } function observeDOM(watches, container, cb) { var observer = new MutationObserver(watch); var filter = Array.prototype.filter; var concat = Array.prototype.concat; observer.observe(container, { childList: true, subtree: true, // changes like style/width/height/display will be catched attributes: true }); function watch(mutations) { // some new DOM nodes where previously watched // we should check their positions if (mutations.some(knownNodes) === true) { setTimeout(cb, 0); } } function knownNodes(mutation) { var nodes = concat.call([], Array.prototype.slice.call(mutation.addedNodes), mutation.target ); return filter.call(nodes, watches.isWatched).length > 0; } } /* WEBPACK VAR INJECTION */ }.call(exports, (function() { return this; }()))) /***/ } /******/ ]);"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"lovetest/file/jscex-jit.js","permalink":"https://zhou251.top/lovetest/file/jscex-jit.js","excerpt":"","text":"(function () { var codeGenerator = (typeof eval(\"(function () {})\") == \"function\") ? function (code) { return code; } : function (code) { return \"false || \" + code; }; // support string type only. var stringify = (typeof JSON !== \"undefined\" && JSON.stringify) ? function (s) { return JSON.stringify(s); } : (function () { // Implementation comes from JSON2 (http://www.json.org/js.html) var escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g; var meta = { // table of character substitutions '\\b': '\\\\b', '\\t': '\\\\t', '\\n': '\\\\n', '\\f': '\\\\f', '\\r': '\\\\r', '\"' : '\\\\\"', '\\\\': '\\\\\\\\' } return function (s) { // If the string contains no control characters, no quote characters, and no // backslash characters, then we can safely slap some quotes around it. // Otherwise we must also replace the offending characters with safe escape // sequences. escapable.lastIndex = 0; return escapable.test(s) ? '\"' + s.replace(escapable, function (a) { var c = meta[a]; return typeof c === 's' ? c : '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4); }) + '\"' : '\"' + s + '\"'; }; })(); // seed defined in global if (typeof __jscex__tempVarSeed === \"undefined\") { __jscex__tempVarSeed = 0; } var init = function (root) { if (root.modules[\"jit\"]) { return; } function JscexTreeGenerator(binder) { this._binder = binder; this._root = null; } JscexTreeGenerator.prototype = { generate: function (ast) { var params = ast[2], statements = ast[3]; this._root = { type: \"delay\", stmts: [] }; this._visitStatements(statements, this._root.stmts); return this._root; }, _getBindInfo: function (stmt) { var type = stmt[0]; if (type == \"stat\") { var expr = stmt[1]; if (expr[0] == \"call\") { var callee = expr[1]; if (callee[0] == \"name\" && callee[1] == this._binder && expr[2].length == 1) { return { expression: expr[2][0], argName: \"\", assignee: null }; } } else if (expr[0] == \"assign\") { var assignee = expr[2]; expr = expr[3]; if (expr[0] == \"call\") { var callee = expr[1]; if (callee[0] == \"name\" && callee[1] == this._binder && expr[2].length == 1) { return { expression: expr[2][0], argName: \"$$_result_$$\", assignee: assignee }; } } } } else if (type == \"var\") { var defs = stmt[1]; if (defs.length == 1) { var item = defs[0]; var name = item[0]; var expr = item[1]; if (expr && expr[0] == \"call\") { var callee = expr[1]; if (callee[0] == \"name\" && callee[1] == this._binder && expr[2].length == 1) { return { expression: expr[2][0], argName: name, assignee: null }; } } } } else if (type == \"return\") { var expr = stmt[1]; if (expr && expr[0] == \"call\") { var callee = expr[1]; if (callee[0] == \"name\" && callee[1] == this._binder && expr[2].length == 1) { return { expression: expr[2][0], argName: \"$$_result_$$\", assignee: \"return\" }; } } } return null; }, _visitStatements: function (statements, stmts, index) { if (arguments.length = statements.length) { stmts.push({ type: \"normal\" }); return this; } var currStmt = statements[index]; var bindInfo = this._getBindInfo(currStmt); if (bindInfo) { var bindStmt = { type: \"bind\", info: bindInfo }; stmts.push(bindStmt); if (bindInfo.assignee != \"return\") { bindStmt.stmts = []; this._visitStatements(statements, bindStmt.stmts, index + 1); } } else { var type = currStmt[0]; if (type == \"return\" || type == \"break\" || type == \"continue\" || type == \"throw\") { stmts.push({ type: type, stmt: currStmt }); } else if (type == \"if\" || type == \"try\" || type == \"for\" || type == \"do\" || type == \"while\" || type == \"switch\" || type == \"for-in\") { var newStmt = this._visit(currStmt); if (newStmt.type == \"raw\") { stmts.push(newStmt); this._visitStatements(statements, stmts, index + 1); } else { var isLast = (index == statements.length - 1); if (isLast) { stmts.push(newStmt); } else { var combineStmt = { type: \"combine\", first: { type: \"delay\", stmts: [newStmt] }, second: { type: \"delay\", stmts: [] } }; stmts.push(combineStmt); this._visitStatements(statements, combineStmt.second.stmts, index + 1); } } } else { stmts.push({ type: \"raw\", stmt: currStmt }); this._visitStatements(statements, stmts, index + 1); } } return this; }, _visit: function (ast) { var type = ast[0]; function throwUnsupportedError() { throw new Error('\"' + type + '\" is not currently supported.'); } var visitor = this._visitors[type]; if (visitor) { return visitor.call(this, ast); } else { throwUnsupportedError(); } }, _visitBody: function (ast, stmts) { if (ast[0] == \"block\") { this._visitStatements(ast[1], stmts); } else { this._visitStatements([ast], stmts); } }, _noBinding: function (stmts) { switch (stmts[stmts.length - 1].type) { case \"normal\": case \"return\": case \"break\": case \"throw\": case \"continue\": return true; } return false; }, _collectCaseStatements: function (cases, index) { var res = []; for (var i = index; i < cases.length; i++) { var rawStmts = cases[i][1]; for (var j = 0; j < rawStmts.length; j++) { if (rawStmts[j][0] == \"break\") { return res } res.push(rawStmts[j]); } } return res; }, _visitors: { \"for\": function (ast) { var bodyStmts = []; var body = ast[4]; this._visitBody(body, bodyStmts); if (this._noBinding(bodyStmts)) { return { type: \"raw\", stmt: ast }; } var delayStmt = { type: \"delay\", stmts: [] }; var setup = ast[1]; if (setup) { delayStmt.stmts.push({ type: \"raw\", stmt: setup }); } var loopStmt = { type: \"loop\", bodyFirst: false, bodyStmt: { type: \"delay\", stmts: bodyStmts } }; delayStmt.stmts.push(loopStmt); var condition = ast[2]; if (condition) { loopStmt.condition = condition; } var update = ast[3]; if (update) { loopStmt.update = update; } return delayStmt; }, \"for-in\": function (ast) { var body = ast[4]; var bodyStmts = []; this._visitBody(body, bodyStmts); if (this._noBinding(bodyStmts)) { return { type: \"raw\", stmt: ast }; } var id = (__jscex__tempVarSeed++); var keysVar = \"$$_keys_$$_\" + id; var indexVar = \"$$_index_$$_\" + id; // var memVar = \"$$_mem_$$_\" + id; var delayStmt = { type: \"delay\", stmts: [] }; // var members = Jscex._forInKeys(obj); var keysAst = root.parse(\"var \" + keysVar + \" = Jscex._forInKeys(obj);\")[1][0]; keysAst[1][0][1][2][0] = ast[3]; // replace obj with real AST; delayStmt.stmts.push({ type: \"raw\", stmt: keysAst }); /* // var members = []; delayStmt.stmts.push({ type: \"raw\", stmt: uglifyJS.parse(\"var \" + membersVar + \" = [];\")[1][0] }); // for (var mem in obj) members.push(mem); var keysAst = uglifyJS.parse(\"for (var \" + memVar +\" in obj) \" + membersVar + \".push(\" + memVar + \");\")[1][0]; keysAst[3] = ast[3]; // replace the \"obj\" with real AST. delayStmt.stmts.push({ type : \"raw\", stmt: keysAst}); */ // var index = 0; delayStmt.stmts.push({ type: \"raw\", stmt: root.parse(\"var \" + indexVar + \" = 0;\")[1][0] }); // index < members.length var condition = root.parse(indexVar + \" < \" + keysVar + \".length\")[1][0][1]; // index++ var update = root.parse(indexVar + \"++\")[1][0][1]; var loopStmt = { type: \"loop\", bodyFirst: false, update: update, condition: condition, bodyStmt: { type: \"delay\", stmts: [] } }; delayStmt.stmts.push(loopStmt); var varName = ast[2][1]; // ast[2] == [\"name\", m] if (ast[1][0] == \"var\") { loopStmt.bodyStmt.stmts.push({ type: \"raw\", stmt: root.parse(\"var \" + varName + \" = \" + keysVar + \"[\" + indexVar + \"];\")[1][0] }); } else { loopStmt.bodyStmt.stmts.push({ type: \"raw\", stmt: root.parse(varName + \" = \" + keysVar + \"[\" + indexVar + \"];\")[1][0] }); } this._visitBody(body, loopStmt.bodyStmt.stmts); return delayStmt; }, \"while\": function (ast) { var bodyStmts = []; var body = ast[2]; this._visitBody(body, bodyStmts); if (this._noBinding(bodyStmts)) { return { type: \"raw\", stmt: ast } } var loopStmt = { type: \"loop\", bodyFirst: false, bodyStmt: { type: \"delay\", stmts: bodyStmts } }; var condition = ast[1]; loopStmt.condition = condition; return loopStmt; }, \"do\": function (ast) { var bodyStmts = []; var body = ast[2]; this._visitBody(body, bodyStmts); if (this._noBinding(bodyStmts)) { return { type: \"raw\", stmt: ast }; } var loopStmt = { type: \"loop\", bodyFirst: true, bodyStmt: { type: \"delay\", stmts: bodyStmts } }; var condition = ast[1]; loopStmt.condition = condition; return loopStmt; }, \"switch\": function (ast) { var noBinding = true; var switchStmt = { type: \"switch\", item: ast[1], caseStmts: [] }; var cases = ast[2]; for (var i = 0; i < cases.length; i++) { var caseStmt = { item: cases[i][0], stmts: [] }; switchStmt.caseStmts.push(caseStmt); var statements = this._collectCaseStatements(cases, i); this._visitStatements(statements, caseStmt.stmts); noBinding = noBinding && this._noBinding(caseStmt.stmts); } if (noBinding) { return { type: \"raw\", stmt: ast }; } else { return switchStmt; } }, \"if\": function (ast) { var noBinding = true; var ifStmt = { type: \"if\", conditionStmts: [] }; var currAst = ast; while (true) { var condition = currAst[1]; var condStmt = { cond: condition, stmts: [] }; ifStmt.conditionStmts.push(condStmt); var thenPart = currAst[2]; this._visitBody(thenPart, condStmt.stmts); noBinding = noBinding && this._noBinding(condStmt.stmts); var elsePart = currAst[3]; if (elsePart && elsePart[0] == \"if\") { currAst = elsePart; } else { break; } } var elsePart = currAst[3]; if (elsePart) { ifStmt.elseStmts = []; this._visitBody(elsePart, ifStmt.elseStmts); noBinding = noBinding && this._noBinding(ifStmt.elseStmts); } if (noBinding) { return { type: \"raw\", stmt: ast }; } else { return ifStmt; } }, \"try\": function (ast, stmts) { var bodyStmts = []; var bodyStatements = ast[1]; this._visitStatements(bodyStatements, bodyStmts); var noBinding = this._noBinding(bodyStmts) var tryStmt = { type: \"try\", bodyStmt: { type: \"delay\", stmts: bodyStmts } }; var catchClause = ast[2]; if (catchClause) { var exVar = catchClause[0]; tryStmt.exVar = exVar; tryStmt.catchStmts = []; this._visitStatements(catchClause[1], tryStmt.catchStmts); noBinding = noBinding && this._noBinding(tryStmt.catchStmts); } var finallyStatements = ast[3]; if (finallyStatements) { tryStmt.finallyStmt = { type: \"delay\", stmts: [] }; this._visitStatements(finallyStatements, tryStmt.finallyStmt.stmts); noBinding = noBinding && this._noBinding(tryStmt.finallyStmt.stmts); } if (noBinding) { return { type: \"raw\", stmt: ast }; } else { return tryStmt; } } } } function CodeGenerator(builderName, binder, indent) { this._builderName = builderName; this._binder = binder; this._normalMode = false; this._indent = indent; this._indentLevel = 0; this._builderVar = \"$$_builder_$$_\" + (__jscex__tempVarSeed++); } CodeGenerator.prototype = { _write: function (s) { this._buffer.push(s); return this; }, _writeLine: function (s) { this._write(s)._write(\"\\n\"); return this; }, _writeIndents: function () { for (var i = 0; i < this._indent; i++) { this._write(\" \"); } for (var i = 0; i < this._indentLevel; i++) { this._write(\" \"); } return this; }, generate: function (params, jscexAst) { this._buffer = []; this._writeLine(\"(function (\" + params.join(\", \") + \") {\"); this._indentLevel++; this._writeIndents() ._writeLine(\"var \" + this._builderVar + \" = Jscex.builders[\" + stringify(this._builderName) + \"];\"); this._writeIndents() ._writeLine(\"return \" + this._builderVar + \".Start(this,\"); this._indentLevel++; this._pos = { }; this._writeIndents() ._visitJscex(jscexAst) ._writeLine(); this._indentLevel--; this._writeIndents() ._writeLine(\");\"); this._indentLevel--; this._writeIndents() ._write(\"})\"); return this._buffer.join(\"\"); }, _visitJscex: function (ast) { this._jscexVisitors[ast.type].call(this, ast); return this; }, _visitRaw: function (ast) { var type = ast[0]; function throwUnsupportedError() { throw new Error('\"' + type + '\" is not currently supported.'); } var visitor = this._rawVisitors[type]; if (visitor) { visitor.call(this, ast); } else { throwUnsupportedError(); } return this; }, _visitJscexStatements: function (statements) { for (var i = 0; i < statements.length; i++) { var stmt = statements[i]; if (stmt.type == \"raw\" || stmt.type == \"if\" || stmt.type == \"switch\") { this._writeIndents() ._visitJscex(stmt)._writeLine(); } else if (stmt.type == \"delay\") { this._visitJscexStatements(stmt.stmts); } else { this._writeIndents() ._write(\"return \")._visitJscex(stmt)._writeLine(\";\"); } } }, _visitRawStatements: function (statements) { for (var i = 0; i < statements.length; i++) { var s = statements[i]; this._writeIndents() ._visitRaw(s)._writeLine(); switch (s[0]) { case \"break\": case \"return\": case \"continue\": case \"throw\": return; } } }, _visitRawBody: function (body) { if (body[0] == \"block\") { this._visitRaw(body); } else { this._writeLine(); this._indentLevel++; this._writeIndents() ._visitRaw(body); this._indentLevel--; } return this; }, _visitRawFunction: function (ast) { var funcName = ast[1] || \"\"; var args = ast[2]; var statements = ast[3]; this._writeLine(\"function \" + funcName + \"(\" + args.join(\", \") + \") {\") this._indentLevel++; var currInFunction = this._pos.inFunction; this._pos.inFunction = true; this._visitRawStatements(statements); this._indentLevel--; this._pos.inFunction = currInFunction; this._writeIndents() ._write(\"}\"); }, _jscexVisitors: { \"delay\": function (ast) { if (ast.stmts.length == 1) { var subStmt = ast.stmts[0]; switch (subStmt.type) { case \"delay\": case \"combine\": case \"normal\": case \"break\": case \"continue\": case \"loop\": case \"try\": this._visitJscex(subStmt); return; case \"return\": if (!subStmt.stmt[1]) { this._visitJscex(subStmt); return; } } } this._writeLine(this._builderVar + \".Delay(function () {\"); this._indentLevel++; this._visitJscexStatements(ast.stmts); this._indentLevel--; this._writeIndents() ._write(\"})\"); }, \"combine\": function (ast) { this._writeLine(this._builderVar + \".Combine(\"); this._indentLevel++; this._writeIndents() ._visitJscex(ast.first)._writeLine(\",\"); this._writeIndents() ._visitJscex(ast.second)._writeLine(); this._indentLevel--; this._writeIndents() ._write(\")\"); }, \"loop\": function (ast) { this._writeLine(this._builderVar + \".Loop(\"); this._indentLevel++; if (ast.condition) { this._writeIndents() ._writeLine(\"function () {\"); this._indentLevel++; this._writeIndents() ._write(\"return \")._visitRaw(ast.condition)._writeLine(\";\"); this._indentLevel--; this._writeIndents() ._writeLine(\"},\"); } else { this._writeIndents()._writeLine(\"null,\"); } if (ast.update) { this._writeIndents() ._writeLine(\"function () {\"); this._indentLevel++; this._writeIndents() ._visitRaw(ast.update)._writeLine(\";\"); this._indentLevel--; this._writeIndents() ._writeLine(\"},\"); } else { this._writeIndents()._writeLine(\"null,\"); } this._writeIndents() ._visitJscex(ast.bodyStmt)._writeLine(\",\"); this._writeIndents() ._writeLine(ast.bodyFirst); this._indentLevel--; this._writeIndents() ._write(\")\"); }, \"raw\": function (ast) { this._visitRaw(ast.stmt); }, \"bind\": function (ast) { var info = ast.info; this._write(this._builderVar + \".Bind(\")._visitRaw(info.expression)._writeLine(\", function (\" + info.argName + \") {\"); this._indentLevel++; if (info.assignee == \"return\") { this._writeIndents() ._writeLine(\"return \" + this._builderVar + \".Return(\" + info.argName + \");\"); } else { if (info.assignee) { this._writeIndents() ._visitRaw(info.assignee)._writeLine(\" = \" + info.argName + \";\"); } this._visitJscexStatements(ast.stmts); } this._indentLevel--; this._writeIndents() ._write(\"})\"); }, \"if\": function (ast) { for (var i = 0; i < ast.conditionStmts.length; i++) { var stmt = ast.conditionStmts[i]; this._write(\"if (\")._visitRaw(stmt.cond)._writeLine(\") {\"); this._indentLevel++; this._visitJscexStatements(stmt.stmts); this._indentLevel--; this._writeIndents() ._write(\"} else \"); } this._writeLine(\"{\"); this._indentLevel++; if (ast.elseStmts) { this._visitJscexStatements(ast.elseStmts); } else { this._writeIndents() ._writeLine(\"return \" + this._builderVar + \".Normal();\"); } this._indentLevel--; this._writeIndents() ._write(\"}\"); }, \"switch\": function (ast) { this._write(\"switch (\")._visitRaw(ast.item)._writeLine(\") {\"); this._indentLevel++; for (var i = 0; i < ast.caseStmts.length; i++) { var caseStmt = ast.caseStmts[i]; if (caseStmt.item) { this._writeIndents() ._write(\"case \")._visitRaw(caseStmt.item)._writeLine(\":\"); } else { this._writeIndents()._writeLine(\"default:\"); } this._indentLevel++; this._visitJscexStatements(caseStmt.stmts); this._indentLevel--; } this._writeIndents() ._write(\"}\"); }, \"try\": function (ast) { this._writeLine(this._builderVar + \".Try(\"); this._indentLevel++; this._writeIndents() ._visitJscex(ast.bodyStmt)._writeLine(\",\"); if (ast.catchStmts) { this._writeIndents() ._writeLine(\"function (\" + ast.exVar + \") {\"); this._indentLevel++; this._visitJscexStatements(ast.catchStmts); this._indentLevel--; this._writeIndents() ._writeLine(\"},\"); } else { this._writeIndents() ._writeLine(\"null,\"); } if (ast.finallyStmt) { this._writeIndents() ._visitJscex(ast.finallyStmt)._writeLine(); } else { this._writeIndents() ._writeLine(\"null\"); } this._indentLevel--; this._writeIndents() ._write(\")\"); }, \"normal\": function (ast) { this._write(this._builderVar + \".Normal()\"); }, \"throw\": function (ast) { this._write(this._builderVar + \".Throw(\")._visitRaw(ast.stmt[1])._write(\")\"); }, \"break\": function (ast) { this._write(this._builderVar + \".Break()\"); }, \"continue\": function (ast) { this._write(this._builderVar + \".Continue()\"); }, \"return\": function (ast) { this._write(this._builderVar + \".Return(\"); if (ast.stmt[1]) this._visitRaw(ast.stmt[1]); this._write(\")\"); } }, _rawVisitors: { \"var\": function (ast) { this._write(\"var \"); var items = ast[1]; for (var i = 0; i < items.length; i++) { this._write(items[i][0]); if (items[i].length > 1) { this._write(\" = \")._visitRaw(items[i][1]); } if (i < items.length - 1) this._write(\", \"); } this._write(\";\"); }, \"seq\": function (ast) { for (var i = 1; i < ast.length; i++) { this._visitRaw(ast[i]); if (i < ast.length - 1) this._write(\", \"); } }, \"binary\": function (ast) { var op = ast[1], left = ast[2], right = ast[3]; function needBracket(item) { var type = item[0]; return !(type == \"num\" || type == \"name\" || type == \"dot\"); } if (needBracket(left)) { this._write(\"(\")._visitRaw(left)._write(\") \"); } else { this._visitRaw(left)._write(\" \"); } this._write(op); if (needBracket(right)) { this._write(\" (\")._visitRaw(right)._write(\")\"); } else { this._write(\" \")._visitRaw(right); } }, \"sub\": function (ast) { var prop = ast[1], index = ast[2]; function needBracket() { return !(prop[0] == \"name\") } if (needBracket()) { this._write(\"(\")._visitRaw(prop)._write(\")[\")._visitRaw(index)._write(\"]\"); } else { this._visitRaw(prop)._write(\"[\")._visitRaw(index)._write(\"]\"); } }, \"unary-postfix\": function (ast) { var op = ast[1]; var item = ast[2]; this._visitRaw(item)._write(op); }, \"unary-prefix\": function (ast) { var op = ast[1]; var item = ast[2]; this._write(op); if (op == \"typeof\") { this._write(\"(\")._visitRaw(item)._write(\")\"); } else { this._visitRaw(item); } }, \"assign\": function (ast) { var op = ast[1]; var name = ast[2]; var value = ast[3]; this._visitRaw(name); if ((typeof op) == \"string\") { this._write(\" \" + op + \"= \"); } else { this._write(\" = \"); } this._visitRaw(value); }, \"stat\": function (ast) { this._visitRaw(ast[1])._write(\";\"); }, \"dot\": function (ast) { function needBracket() { var leftOp = ast[1][0]; return !(leftOp == \"dot\" || leftOp == \"name\"); } if (needBracket()) { this._write(\"(\")._visitRaw(ast[1])._write(\").\")._write(ast[2]); } else { this._visitRaw(ast[1])._write(\".\")._write(ast[2]); } }, \"new\": function (ast) { var ctor = ast[1]; this._write(\"new \")._visitRaw(ctor)._write(\"(\"); var args = ast[2]; for (var i = 0, len = args.length; i < len; i++) { this._visitRaw(args[i]); if (i < len - 1) this._write(\", \"); } this._write(\")\"); }, \"call\": function (ast) { if (_isJscexPattern(ast)) { var indent = this._indent + this._indentLevel * 4; var newCode = _compileJscexPattern(ast, indent); this._write(newCode); } else { var invalidBind = (ast[1][0] == \"name\") && (ast[1][1] == this._binder); if (invalidBind) { this._pos = { inFunction: true }; this._buffer = []; } this._visitRaw(ast[1])._write(\"(\"); var args = ast[2]; for (var i = 0; i < args.length; i++) { this._visitRaw(args[i]); if (i < args.length - 1) this._write(\", \"); } this._write(\")\"); if (invalidBind) { throw (\"Invalid bind operation: \" + this._buffer.join(\"\")); } } }, \"name\": function (ast) { this._write(ast[1]); }, \"object\": function (ast) { var items = ast[1]; if (items.length"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"lovetest/file/jscex-parser.js","permalink":"https://zhou251.top/lovetest/file/jscex-parser.js","excerpt":"","text":"/*********************************************************************** A JavaScript tokenizer / parser / beautifier / compressor. This version is suitable for Node.js. With minimal changes (the exports stuff) it should work on any JS platform. This file contains the tokenizer/parser. It is a port to JavaScript of parse-js [1], a JavaScript parser library written in Common Lisp by Marijn Haverbeke. Thank you Marijn! [1] http://marijn.haverbeke.nl/parse-js/ Exported functions: - tokenizer(code) -- returns a function. Call the returned function to fetch the next token. - parse(code) -- returns an AST of the given JavaScript code. -------------------------------- (C) --------------------------------- Author: Mihai Bazon http://mihai.bazon.net/blog Distributed under the BSD license: Copyright 2010 (c) Mihai Bazon Based on parse-js (http://marijn.haverbeke.nl/parse-js/). Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDER “AS IS” AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. ***********************************************************************/ (function () { /* -----[ Tokenizer (constants) ]----- */ var KEYWORDS = array_to_hash([ \"break\", \"case\", \"catch\", \"const\", \"continue\", \"default\", \"delete\", \"do\", \"else\", \"finally\", \"for\", \"function\", \"if\", \"in\", \"instanceof\", \"new\", \"return\", \"switch\", \"throw\", \"try\", \"typeof\", \"var\", \"void\", \"while\", \"with\" ]); var RESERVED_WORDS = array_to_hash([ \"abstract\", \"boolean\", \"byte\", \"char\", \"class\", \"debugger\", \"double\", \"enum\", \"export\", \"extends\", \"final\", \"float\", \"goto\", \"implements\", \"import\", \"int\", \"interface\", \"long\", \"native\", \"package\", \"private\", \"protected\", \"public\", \"short\", \"static\", \"super\", \"synchronized\", \"throws\", \"transient\", \"volatile\" ]); var KEYWORDS_BEFORE_EXPRESSION = array_to_hash([ \"return\", \"new\", \"delete\", \"throw\", \"else\", \"case\" ]); var KEYWORDS_ATOM = array_to_hash([ \"false\", \"null\", \"true\", \"undefined\" ]); var OPERATOR_CHARS = array_to_hash(characters(\"+-*&%=!?|~^\")); var RE_HEX_NUMBER = /^0x[0-9a-f]+$/i; var RE_OCT_NUMBER = /^0[0-7]+$/; var RE_DEC_NUMBER = /^\\d*\\.?\\d*(?:e[+-]?\\d*(?:\\d\\.?|\\.?\\d)\\d*)?$/i; var OPERATORS = array_to_hash([ \"in\", \"instanceof\", \"typeof\", \"new\", \"void\", \"delete\", \"++\", \"--\", \"+\", \"-\", \"!\", \"~\", \"&\", \"|\", \"^\", \"*\", \"/\", \"%\", \">>\", \">\", \"\", \"=\", \"==\", \"===\", \"!=\", \"!==\", \"?\", \"=\", \"+=\", \"-=\", \"/=\", \"*=\", \"%=\", \">>=\", \">=\", \"|=\", \"^=\", \"&=\", \"&&\", \"||\" ]); var WHITESPACE_CHARS = array_to_hash(characters(\" \\n\\r\\t\\u200b\")); var PUNC_BEFORE_EXPRESSION = array_to_hash(characters(\"[{}(,.;:\")); var PUNC_CHARS = array_to_hash(characters(\"[]{}(),;:\")); var REGEXP_MODIFIERS = array_to_hash(characters(\"gmsiy\")); /* -----[ Tokenizer ]----- */ // regexps adapted from http://xregexp.com/plugins/#unicode var UNICODE = { letter: new RegExp(\"[\\\\u0041-\\\\u005A\\\\u0061-\\\\u007A\\\\u00AA\\\\u00B5\\\\u00BA\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02C1\\\\u02C6-\\\\u02D1\\\\u02E0-\\\\u02E4\\\\u02EC\\\\u02EE\\\\u0370-\\\\u0374\\\\u0376\\\\u0377\\\\u037A-\\\\u037D\\\\u0386\\\\u0388-\\\\u038A\\\\u038C\\\\u038E-\\\\u03A1\\\\u03A3-\\\\u03F5\\\\u03F7-\\\\u0481\\\\u048A-\\\\u0523\\\\u0531-\\\\u0556\\\\u0559\\\\u0561-\\\\u0587\\\\u05D0-\\\\u05EA\\\\u05F0-\\\\u05F2\\\\u0621-\\\\u064A\\\\u066E\\\\u066F\\\\u0671-\\\\u06D3\\\\u06D5\\\\u06E5\\\\u06E6\\\\u06EE\\\\u06EF\\\\u06FA-\\\\u06FC\\\\u06FF\\\\u0710\\\\u0712-\\\\u072F\\\\u074D-\\\\u07A5\\\\u07B1\\\\u07CA-\\\\u07EA\\\\u07F4\\\\u07F5\\\\u07FA\\\\u0904-\\\\u0939\\\\u093D\\\\u0950\\\\u0958-\\\\u0961\\\\u0971\\\\u0972\\\\u097B-\\\\u097F\\\\u0985-\\\\u098C\\\\u098F\\\\u0990\\\\u0993-\\\\u09A8\\\\u09AA-\\\\u09B0\\\\u09B2\\\\u09B6-\\\\u09B9\\\\u09BD\\\\u09CE\\\\u09DC\\\\u09DD\\\\u09DF-\\\\u09E1\\\\u09F0\\\\u09F1\\\\u0A05-\\\\u0A0A\\\\u0A0F\\\\u0A10\\\\u0A13-\\\\u0A28\\\\u0A2A-\\\\u0A30\\\\u0A32\\\\u0A33\\\\u0A35\\\\u0A36\\\\u0A38\\\\u0A39\\\\u0A59-\\\\u0A5C\\\\u0A5E\\\\u0A72-\\\\u0A74\\\\u0A85-\\\\u0A8D\\\\u0A8F-\\\\u0A91\\\\u0A93-\\\\u0AA8\\\\u0AAA-\\\\u0AB0\\\\u0AB2\\\\u0AB3\\\\u0AB5-\\\\u0AB9\\\\u0ABD\\\\u0AD0\\\\u0AE0\\\\u0AE1\\\\u0B05-\\\\u0B0C\\\\u0B0F\\\\u0B10\\\\u0B13-\\\\u0B28\\\\u0B2A-\\\\u0B30\\\\u0B32\\\\u0B33\\\\u0B35-\\\\u0B39\\\\u0B3D\\\\u0B5C\\\\u0B5D\\\\u0B5F-\\\\u0B61\\\\u0B71\\\\u0B83\\\\u0B85-\\\\u0B8A\\\\u0B8E-\\\\u0B90\\\\u0B92-\\\\u0B95\\\\u0B99\\\\u0B9A\\\\u0B9C\\\\u0B9E\\\\u0B9F\\\\u0BA3\\\\u0BA4\\\\u0BA8-\\\\u0BAA\\\\u0BAE-\\\\u0BB9\\\\u0BD0\\\\u0C05-\\\\u0C0C\\\\u0C0E-\\\\u0C10\\\\u0C12-\\\\u0C28\\\\u0C2A-\\\\u0C33\\\\u0C35-\\\\u0C39\\\\u0C3D\\\\u0C58\\\\u0C59\\\\u0C60\\\\u0C61\\\\u0C85-\\\\u0C8C\\\\u0C8E-\\\\u0C90\\\\u0C92-\\\\u0CA8\\\\u0CAA-\\\\u0CB3\\\\u0CB5-\\\\u0CB9\\\\u0CBD\\\\u0CDE\\\\u0CE0\\\\u0CE1\\\\u0D05-\\\\u0D0C\\\\u0D0E-\\\\u0D10\\\\u0D12-\\\\u0D28\\\\u0D2A-\\\\u0D39\\\\u0D3D\\\\u0D60\\\\u0D61\\\\u0D7A-\\\\u0D7F\\\\u0D85-\\\\u0D96\\\\u0D9A-\\\\u0DB1\\\\u0DB3-\\\\u0DBB\\\\u0DBD\\\\u0DC0-\\\\u0DC6\\\\u0E01-\\\\u0E30\\\\u0E32\\\\u0E33\\\\u0E40-\\\\u0E46\\\\u0E81\\\\u0E82\\\\u0E84\\\\u0E87\\\\u0E88\\\\u0E8A\\\\u0E8D\\\\u0E94-\\\\u0E97\\\\u0E99-\\\\u0E9F\\\\u0EA1-\\\\u0EA3\\\\u0EA5\\\\u0EA7\\\\u0EAA\\\\u0EAB\\\\u0EAD-\\\\u0EB0\\\\u0EB2\\\\u0EB3\\\\u0EBD\\\\u0EC0-\\\\u0EC4\\\\u0EC6\\\\u0EDC\\\\u0EDD\\\\u0F00\\\\u0F40-\\\\u0F47\\\\u0F49-\\\\u0F6C\\\\u0F88-\\\\u0F8B\\\\u1000-\\\\u102A\\\\u103F\\\\u1050-\\\\u1055\\\\u105A-\\\\u105D\\\\u1061\\\\u1065\\\\u1066\\\\u106E-\\\\u1070\\\\u1075-\\\\u1081\\\\u108E\\\\u10A0-\\\\u10C5\\\\u10D0-\\\\u10FA\\\\u10FC\\\\u1100-\\\\u1159\\\\u115F-\\\\u11A2\\\\u11A8-\\\\u11F9\\\\u1200-\\\\u1248\\\\u124A-\\\\u124D\\\\u1250-\\\\u1256\\\\u1258\\\\u125A-\\\\u125D\\\\u1260-\\\\u1288\\\\u128A-\\\\u128D\\\\u1290-\\\\u12B0\\\\u12B2-\\\\u12B5\\\\u12B8-\\\\u12BE\\\\u12C0\\\\u12C2-\\\\u12C5\\\\u12C8-\\\\u12D6\\\\u12D8-\\\\u1310\\\\u1312-\\\\u1315\\\\u1318-\\\\u135A\\\\u1380-\\\\u138F\\\\u13A0-\\\\u13F4\\\\u1401-\\\\u166C\\\\u166F-\\\\u1676\\\\u1681-\\\\u169A\\\\u16A0-\\\\u16EA\\\\u1700-\\\\u170C\\\\u170E-\\\\u1711\\\\u1720-\\\\u1731\\\\u1740-\\\\u1751\\\\u1760-\\\\u176C\\\\u176E-\\\\u1770\\\\u1780-\\\\u17B3\\\\u17D7\\\\u17DC\\\\u1820-\\\\u1877\\\\u1880-\\\\u18A8\\\\u18AA\\\\u1900-\\\\u191C\\\\u1950-\\\\u196D\\\\u1970-\\\\u1974\\\\u1980-\\\\u19A9\\\\u19C1-\\\\u19C7\\\\u1A00-\\\\u1A16\\\\u1B05-\\\\u1B33\\\\u1B45-\\\\u1B4B\\\\u1B83-\\\\u1BA0\\\\u1BAE\\\\u1BAF\\\\u1C00-\\\\u1C23\\\\u1C4D-\\\\u1C4F\\\\u1C5A-\\\\u1C7D\\\\u1D00-\\\\u1DBF\\\\u1E00-\\\\u1F15\\\\u1F18-\\\\u1F1D\\\\u1F20-\\\\u1F45\\\\u1F48-\\\\u1F4D\\\\u1F50-\\\\u1F57\\\\u1F59\\\\u1F5B\\\\u1F5D\\\\u1F5F-\\\\u1F7D\\\\u1F80-\\\\u1FB4\\\\u1FB6-\\\\u1FBC\\\\u1FBE\\\\u1FC2-\\\\u1FC4\\\\u1FC6-\\\\u1FCC\\\\u1FD0-\\\\u1FD3\\\\u1FD6-\\\\u1FDB\\\\u1FE0-\\\\u1FEC\\\\u1FF2-\\\\u1FF4\\\\u1FF6-\\\\u1FFC\\\\u2071\\\\u207F\\\\u2090-\\\\u2094\\\\u2102\\\\u2107\\\\u210A-\\\\u2113\\\\u2115\\\\u2119-\\\\u211D\\\\u2124\\\\u2126\\\\u2128\\\\u212A-\\\\u212D\\\\u212F-\\\\u2139\\\\u213C-\\\\u213F\\\\u2145-\\\\u2149\\\\u214E\\\\u2183\\\\u2184\\\\u2C00-\\\\u2C2E\\\\u2C30-\\\\u2C5E\\\\u2C60-\\\\u2C6F\\\\u2C71-\\\\u2C7D\\\\u2C80-\\\\u2CE4\\\\u2D00-\\\\u2D25\\\\u2D30-\\\\u2D65\\\\u2D6F\\\\u2D80-\\\\u2D96\\\\u2DA0-\\\\u2DA6\\\\u2DA8-\\\\u2DAE\\\\u2DB0-\\\\u2DB6\\\\u2DB8-\\\\u2DBE\\\\u2DC0-\\\\u2DC6\\\\u2DC8-\\\\u2DCE\\\\u2DD0-\\\\u2DD6\\\\u2DD8-\\\\u2DDE\\\\u2E2F\\\\u3005\\\\u3006\\\\u3031-\\\\u3035\\\\u303B\\\\u303C\\\\u3041-\\\\u3096\\\\u309D-\\\\u309F\\\\u30A1-\\\\u30FA\\\\u30FC-\\\\u30FF\\\\u3105-\\\\u312D\\\\u3131-\\\\u318E\\\\u31A0-\\\\u31B7\\\\u31F0-\\\\u31FF\\\\u3400\\\\u4DB5\\\\u4E00\\\\u9FC3\\\\uA000-\\\\uA48C\\\\uA500-\\\\uA60C\\\\uA610-\\\\uA61F\\\\uA62A\\\\uA62B\\\\uA640-\\\\uA65F\\\\uA662-\\\\uA66E\\\\uA67F-\\\\uA697\\\\uA717-\\\\uA71F\\\\uA722-\\\\uA788\\\\uA78B\\\\uA78C\\\\uA7FB-\\\\uA801\\\\uA803-\\\\uA805\\\\uA807-\\\\uA80A\\\\uA80C-\\\\uA822\\\\uA840-\\\\uA873\\\\uA882-\\\\uA8B3\\\\uA90A-\\\\uA925\\\\uA930-\\\\uA946\\\\uAA00-\\\\uAA28\\\\uAA40-\\\\uAA42\\\\uAA44-\\\\uAA4B\\\\uAC00\\\\uD7A3\\\\uF900-\\\\uFA2D\\\\uFA30-\\\\uFA6A\\\\uFA70-\\\\uFAD9\\\\uFB00-\\\\uFB06\\\\uFB13-\\\\uFB17\\\\uFB1D\\\\uFB1F-\\\\uFB28\\\\uFB2A-\\\\uFB36\\\\uFB38-\\\\uFB3C\\\\uFB3E\\\\uFB40\\\\uFB41\\\\uFB43\\\\uFB44\\\\uFB46-\\\\uFBB1\\\\uFBD3-\\\\uFD3D\\\\uFD50-\\\\uFD8F\\\\uFD92-\\\\uFDC7\\\\uFDF0-\\\\uFDFB\\\\uFE70-\\\\uFE74\\\\uFE76-\\\\uFEFC\\\\uFF21-\\\\uFF3A\\\\uFF41-\\\\uFF5A\\\\uFF66-\\\\uFFBE\\\\uFFC2-\\\\uFFC7\\\\uFFCA-\\\\uFFCF\\\\uFFD2-\\\\uFFD7\\\\uFFDA-\\\\uFFDC]\"), non_spacing_mark: new RegExp(\"[\\\\u0300-\\\\u036F\\\\u0483-\\\\u0487\\\\u0591-\\\\u05BD\\\\u05BF\\\\u05C1\\\\u05C2\\\\u05C4\\\\u05C5\\\\u05C7\\\\u0610-\\\\u061A\\\\u064B-\\\\u065E\\\\u0670\\\\u06D6-\\\\u06DC\\\\u06DF-\\\\u06E4\\\\u06E7\\\\u06E8\\\\u06EA-\\\\u06ED\\\\u0711\\\\u0730-\\\\u074A\\\\u07A6-\\\\u07B0\\\\u07EB-\\\\u07F3\\\\u0816-\\\\u0819\\\\u081B-\\\\u0823\\\\u0825-\\\\u0827\\\\u0829-\\\\u082D\\\\u0900-\\\\u0902\\\\u093C\\\\u0941-\\\\u0948\\\\u094D\\\\u0951-\\\\u0955\\\\u0962\\\\u0963\\\\u0981\\\\u09BC\\\\u09C1-\\\\u09C4\\\\u09CD\\\\u09E2\\\\u09E3\\\\u0A01\\\\u0A02\\\\u0A3C\\\\u0A41\\\\u0A42\\\\u0A47\\\\u0A48\\\\u0A4B-\\\\u0A4D\\\\u0A51\\\\u0A70\\\\u0A71\\\\u0A75\\\\u0A81\\\\u0A82\\\\u0ABC\\\\u0AC1-\\\\u0AC5\\\\u0AC7\\\\u0AC8\\\\u0ACD\\\\u0AE2\\\\u0AE3\\\\u0B01\\\\u0B3C\\\\u0B3F\\\\u0B41-\\\\u0B44\\\\u0B4D\\\\u0B56\\\\u0B62\\\\u0B63\\\\u0B82\\\\u0BC0\\\\u0BCD\\\\u0C3E-\\\\u0C40\\\\u0C46-\\\\u0C48\\\\u0C4A-\\\\u0C4D\\\\u0C55\\\\u0C56\\\\u0C62\\\\u0C63\\\\u0CBC\\\\u0CBF\\\\u0CC6\\\\u0CCC\\\\u0CCD\\\\u0CE2\\\\u0CE3\\\\u0D41-\\\\u0D44\\\\u0D4D\\\\u0D62\\\\u0D63\\\\u0DCA\\\\u0DD2-\\\\u0DD4\\\\u0DD6\\\\u0E31\\\\u0E34-\\\\u0E3A\\\\u0E47-\\\\u0E4E\\\\u0EB1\\\\u0EB4-\\\\u0EB9\\\\u0EBB\\\\u0EBC\\\\u0EC8-\\\\u0ECD\\\\u0F18\\\\u0F19\\\\u0F35\\\\u0F37\\\\u0F39\\\\u0F71-\\\\u0F7E\\\\u0F80-\\\\u0F84\\\\u0F86\\\\u0F87\\\\u0F90-\\\\u0F97\\\\u0F99-\\\\u0FBC\\\\u0FC6\\\\u102D-\\\\u1030\\\\u1032-\\\\u1037\\\\u1039\\\\u103A\\\\u103D\\\\u103E\\\\u1058\\\\u1059\\\\u105E-\\\\u1060\\\\u1071-\\\\u1074\\\\u1082\\\\u1085\\\\u1086\\\\u108D\\\\u109D\\\\u135F\\\\u1712-\\\\u1714\\\\u1732-\\\\u1734\\\\u1752\\\\u1753\\\\u1772\\\\u1773\\\\u17B7-\\\\u17BD\\\\u17C6\\\\u17C9-\\\\u17D3\\\\u17DD\\\\u180B-\\\\u180D\\\\u18A9\\\\u1920-\\\\u1922\\\\u1927\\\\u1928\\\\u1932\\\\u1939-\\\\u193B\\\\u1A17\\\\u1A18\\\\u1A56\\\\u1A58-\\\\u1A5E\\\\u1A60\\\\u1A62\\\\u1A65-\\\\u1A6C\\\\u1A73-\\\\u1A7C\\\\u1A7F\\\\u1B00-\\\\u1B03\\\\u1B34\\\\u1B36-\\\\u1B3A\\\\u1B3C\\\\u1B42\\\\u1B6B-\\\\u1B73\\\\u1B80\\\\u1B81\\\\u1BA2-\\\\u1BA5\\\\u1BA8\\\\u1BA9\\\\u1C2C-\\\\u1C33\\\\u1C36\\\\u1C37\\\\u1CD0-\\\\u1CD2\\\\u1CD4-\\\\u1CE0\\\\u1CE2-\\\\u1CE8\\\\u1CED\\\\u1DC0-\\\\u1DE6\\\\u1DFD-\\\\u1DFF\\\\u20D0-\\\\u20DC\\\\u20E1\\\\u20E5-\\\\u20F0\\\\u2CEF-\\\\u2CF1\\\\u2DE0-\\\\u2DFF\\\\u302A-\\\\u302F\\\\u3099\\\\u309A\\\\uA66F\\\\uA67C\\\\uA67D\\\\uA6F0\\\\uA6F1\\\\uA802\\\\uA806\\\\uA80B\\\\uA825\\\\uA826\\\\uA8C4\\\\uA8E0-\\\\uA8F1\\\\uA926-\\\\uA92D\\\\uA947-\\\\uA951\\\\uA980-\\\\uA982\\\\uA9B3\\\\uA9B6-\\\\uA9B9\\\\uA9BC\\\\uAA29-\\\\uAA2E\\\\uAA31\\\\uAA32\\\\uAA35\\\\uAA36\\\\uAA43\\\\uAA4C\\\\uAAB0\\\\uAAB2-\\\\uAAB4\\\\uAAB7\\\\uAAB8\\\\uAABE\\\\uAABF\\\\uAAC1\\\\uABE5\\\\uABE8\\\\uABED\\\\uFB1E\\\\uFE00-\\\\uFE0F\\\\uFE20-\\\\uFE26]\"), space_combining_mark: new RegExp(\"[\\\\u0903\\\\u093E-\\\\u0940\\\\u0949-\\\\u094C\\\\u094E\\\\u0982\\\\u0983\\\\u09BE-\\\\u09C0\\\\u09C7\\\\u09C8\\\\u09CB\\\\u09CC\\\\u09D7\\\\u0A03\\\\u0A3E-\\\\u0A40\\\\u0A83\\\\u0ABE-\\\\u0AC0\\\\u0AC9\\\\u0ACB\\\\u0ACC\\\\u0B02\\\\u0B03\\\\u0B3E\\\\u0B40\\\\u0B47\\\\u0B48\\\\u0B4B\\\\u0B4C\\\\u0B57\\\\u0BBE\\\\u0BBF\\\\u0BC1\\\\u0BC2\\\\u0BC6-\\\\u0BC8\\\\u0BCA-\\\\u0BCC\\\\u0BD7\\\\u0C01-\\\\u0C03\\\\u0C41-\\\\u0C44\\\\u0C82\\\\u0C83\\\\u0CBE\\\\u0CC0-\\\\u0CC4\\\\u0CC7\\\\u0CC8\\\\u0CCA\\\\u0CCB\\\\u0CD5\\\\u0CD6\\\\u0D02\\\\u0D03\\\\u0D3E-\\\\u0D40\\\\u0D46-\\\\u0D48\\\\u0D4A-\\\\u0D4C\\\\u0D57\\\\u0D82\\\\u0D83\\\\u0DCF-\\\\u0DD1\\\\u0DD8-\\\\u0DDF\\\\u0DF2\\\\u0DF3\\\\u0F3E\\\\u0F3F\\\\u0F7F\\\\u102B\\\\u102C\\\\u1031\\\\u1038\\\\u103B\\\\u103C\\\\u1056\\\\u1057\\\\u1062-\\\\u1064\\\\u1067-\\\\u106D\\\\u1083\\\\u1084\\\\u1087-\\\\u108C\\\\u108F\\\\u109A-\\\\u109C\\\\u17B6\\\\u17BE-\\\\u17C5\\\\u17C7\\\\u17C8\\\\u1923-\\\\u1926\\\\u1929-\\\\u192B\\\\u1930\\\\u1931\\\\u1933-\\\\u1938\\\\u19B0-\\\\u19C0\\\\u19C8\\\\u19C9\\\\u1A19-\\\\u1A1B\\\\u1A55\\\\u1A57\\\\u1A61\\\\u1A63\\\\u1A64\\\\u1A6D-\\\\u1A72\\\\u1B04\\\\u1B35\\\\u1B3B\\\\u1B3D-\\\\u1B41\\\\u1B43\\\\u1B44\\\\u1B82\\\\u1BA1\\\\u1BA6\\\\u1BA7\\\\u1BAA\\\\u1C24-\\\\u1C2B\\\\u1C34\\\\u1C35\\\\u1CE1\\\\u1CF2\\\\uA823\\\\uA824\\\\uA827\\\\uA880\\\\uA881\\\\uA8B4-\\\\uA8C3\\\\uA952\\\\uA953\\\\uA983\\\\uA9B4\\\\uA9B5\\\\uA9BA\\\\uA9BB\\\\uA9BD-\\\\uA9C0\\\\uAA2F\\\\uAA30\\\\uAA33\\\\uAA34\\\\uAA4D\\\\uAA7B\\\\uABE3\\\\uABE4\\\\uABE6\\\\uABE7\\\\uABE9\\\\uABEA\\\\uABEC]\"), connector_punctuation: new RegExp(\"[\\\\u005F\\\\u203F\\\\u2040\\\\u2054\\\\uFE33\\\\uFE34\\\\uFE4D-\\\\uFE4F\\\\uFF3F]\") }; function is_letter(ch) { return UNICODE.letter.test(ch); }; function is_digit(ch) { ch = ch.charCodeAt(0); return ch >= 48 && ch 0; --n) { var digit = parseInt(next(true), 16); if (isNaN(digit)) parse_error(\"Invalid hex-character pattern in string\"); num = (num < 4) | digit; } return num; }; function read_string() { return with_eof_error(\"Unterminated string constant\", function(){ var quote = next(), ret = \"\"; for (;;) { var ch = next(true); if (ch == \"\\\\\") ch = read_escaped_char(); else if (ch == quote) break; ret += ch; } return token(\"string\", ret); }); }; function read_line_comment() { next(); var i = find(\"\\n\"), ret; if (i == -1) { ret = S.text.substr(S.pos); S.pos = S.text.length; } else { ret = S.text.substring(S.pos, i); S.pos = i; } return token(\"comment1\", ret, true); }; function read_multiline_comment() { next(); return with_eof_error(\"Unterminated multiline comment\", function(){ var i = find(\"*/\", true), text = S.text.substring(S.pos, i), tok = token(\"comment2\", text, true); S.pos = i + 2; S.line += text.split(\"\\n\").length - 1; S.newline_before = text.indexOf(\"\\n\") >= 0; // https://github.com/mishoo/UglifyJS/issues/#issue/100 if (/^@cc_on/i.test(text)) { warn(\"WARNING: at line \" + S.line); warn(\"*** Found \\\"conditional comment\\\": \" + text); warn(\"*** UglifyJS DISCARDS ALL COMMENTS. This means your code might no longer work properly in Internet Explorer.\"); } return tok; }); }; function read_name() { var backslash = false, name = \"\", ch; while ((ch = peek()) != null) { if (!backslash) { if (ch == \"\\\\\") backslash = true, next(); else if (is_identifier_char(ch)) name += next(); else break; } else { if (ch != \"u\") parse_error(\"Expecting UnicodeEscapeSequence -- uXXXX\"); ch = read_escaped_char(); if (!is_identifier_char(ch)) parse_error(\"Unicode char: \" + ch.charCodeAt(0) + \" is not valid in identifier\"); name += ch; backslash = false; } } return name; }; function read_regexp() { return with_eof_error(\"Unterminated regular expression\", function(){ var prev_backslash = false, regexp = \"\", ch, in_class = false; while ((ch = next(true))) if (prev_backslash) { regexp += \"\\\\\" + ch; prev_backslash = false; } else if (ch == \"[\") { in_class = true; regexp += ch; } else if (ch == \"]\" && in_class) { in_class = false; regexp += ch; } else if (ch == \"/\" && !in_class) { break; } else if (ch == \"\\\\\") { prev_backslash = true; } else { regexp += ch; } var mods = read_name(); return token(\"regexp\", [ regexp, mods ]); }); }; function read_operator(prefix) { function grow(op) { if (!peek()) return op; var bigger = op + peek(); if (HOP(OPERATORS, bigger)) { next(); return grow(bigger); } else { return op; } }; return token(\"operator\", grow(prefix || next())); }; function handle_slash() { next(); var regex_allowed = S.regex_allowed; switch (peek()) { case \"/\": S.comments_before.push(read_line_comment()); S.regex_allowed = regex_allowed; return next_token(); case \"*\": S.comments_before.push(read_multiline_comment()); S.regex_allowed = regex_allowed; return next_token(); } return S.regex_allowed ? read_regexp() : read_operator(\"/\"); }; function handle_dot() { next(); return is_digit(peek()) ? read_num(\".\") : token(\"punc\", \".\"); }; function read_word() { var word = read_name(); return !HOP(KEYWORDS, word) ? token(\"name\", word) : HOP(OPERATORS, word) ? token(\"operator\", word) : HOP(KEYWORDS_ATOM, word) ? token(\"atom\", word) : token(\"keyword\", word); }; function with_eof_error(eof_error, cont) { try { return cont(); } catch(ex) { if (ex === EX_EOF) parse_error(eof_error); else throw ex; } }; function next_token(force_regexp) { if (force_regexp) return read_regexp(); skip_whitespace(); start_token(); var ch = peek(); if (!ch) return token(\"eof\"); if (is_digit(ch)) return read_num(); if (ch == '\"' || ch == \"'\") return read_string(); if (HOP(PUNC_CHARS, ch)) return token(\"punc\", next()); if (ch == \".\") return handle_dot(); if (ch == \"/\") return handle_slash(); if (HOP(OPERATOR_CHARS, ch)) return read_operator(); if (ch == \"\\\\\" || is_identifier_start(ch)) return read_word(); parse_error(\"Unexpected character '\" + ch + \"'\"); }; next_token.context = function(nc) { if (nc) S = nc; return S; }; return next_token; }; /* -----[ Parser (constants) ]----- */ var UNARY_PREFIX = array_to_hash([ \"typeof\", \"void\", \"delete\", \"--\", \"++\", \"!\", \"~\", \"-\", \"+\" ]); var UNARY_POSTFIX = array_to_hash([ \"--\", \"++\" ]); var ASSIGNMENT = (function(a, ret, i){ while (i < a.length) { ret[a[i]] = a[i].substr(0, a[i].length - 1); i++; } return ret; })( [\"+=\", \"-=\", \"/=\", \"*=\", \"%=\", \">>=\", \"=\", \"|=\", \"^=\", \"&=\"], { \"=\": true }, 0 ); var PRECEDENCE = (function(a, ret){ for (var i = 0, n = 1; i < a.length; ++i, ++n) { var b = a[i]; for (var j = 0; j < b.length; ++j) { ret[b[j]] = n; } } return ret; })( [ [\"||\"], [\"&&\"], [\"|\"], [\"^\"], [\"&\"], [\"==\", \"===\", \"!=\", \"!==\"], [\"\", \"=\", \"in\", \"instanceof\"], [\">>\", \">\"], [\"+\", \"-\"], [\"*\", \"/\", \"%\"] ], {} ); var STATEMENTS_WITH_LABELS = array_to_hash([ \"for\", \"do\", \"while\", \"switch\" ]); var ATOMIC_START_TOKEN = array_to_hash([ \"atom\", \"num\", \"string\", \"regexp\", \"name\" ]); /* -----[ Parser ]----- */ function NodeWithToken(str, start, end) { this.name = str; this.start = start; this.end = end; }; NodeWithToken.prototype.toString = function() { return this.name; }; function parse($TEXT, exigent_mode, embed_tokens) { var S = { input : typeof $TEXT == \"string\" ? tokenizer($TEXT, true) : $TEXT, token : null, prev : null, peeked : null, in_function : 0, in_loop : 0, labels : [] }; S.token = next(); function is(type, value) { return is_token(S.token, type, value); }; function peek() { return S.peeked || (S.peeked = S.input()); }; function next() { S.prev = S.token; if (S.peeked) { S.token = S.peeked; S.peeked = null; } else { S.token = S.input(); } return S.token; }; function prev() { return S.prev; }; function croak(msg, line, col, pos) { var ctx = S.input.context(); js_error(msg, line != null ? line : ctx.tokline, col != null ? col : ctx.tokcol, pos != null ? pos : ctx.tokpos); }; function token_error(token, msg) { croak(msg, token.line, token.col); }; function unexpected(token) { if (token == null) token = S.token; token_error(token, \"Unexpected token: \" + token.type + \" (\" + token.value + \")\"); }; function expect_token(type, val) { if (is(type, val)) { return next(); } token_error(S.token, \"Unexpected token \" + S.token.type + \", expected \" + type); }; function expect(punc) { return expect_token(\"punc\", punc); }; function can_insert_semicolon() { return !exigent_mode && ( S.token.nlb || is(\"eof\") || is(\"punc\", \"}\") ); }; function semicolon() { if (is(\"punc\", \";\")) next(); else if (!can_insert_semicolon()) unexpected(); }; function as() { return slice(arguments); }; function parenthesised() { expect(\"(\"); var ex = expression(); expect(\")\"); return ex; }; function add_tokens(str, start, end) { return str instanceof NodeWithToken ? str : new NodeWithToken(str, start, end); }; var statement = embed_tokens ? function() { var start = S.token; var ast = $statement.apply(this, arguments); ast[0] = add_tokens(ast[0], start, prev()); return ast; } : $statement; function $statement() { if (is(\"operator\", \"/\")) { S.peeked = null; S.token = S.input(true); // force regexp } switch (S.token.type) { case \"num\": case \"string\": case \"regexp\": case \"operator\": case \"atom\": return simple_statement(); case \"name\": return is_token(peek(), \"punc\", \":\") ? labeled_statement(prog1(S.token.value, next, next)) : simple_statement(); case \"punc\": switch (S.token.value) { case \"{\": return as(\"block\", block_()); case \"[\": case \"(\": return simple_statement(); case \";\": next(); return as(\"block\"); default: unexpected(); } case \"keyword\": switch (prog1(S.token.value, next)) { case \"break\": return break_cont(\"break\"); case \"continue\": return break_cont(\"continue\"); case \"debugger\": semicolon(); return as(\"debugger\"); case \"do\": return (function(body){ expect_token(\"keyword\", \"while\"); return as(\"do\", prog1(parenthesised, semicolon), body); })(in_loop(statement)); case \"for\": return for_(); case \"function\": return function_(true); case \"if\": return if_(); case \"return\": if (S.in_function == 0) croak(\"'return' outside of function\"); return as(\"return\", is(\"punc\", \";\") ? (next(), null) : can_insert_semicolon() ? null : prog1(expression, semicolon)); case \"switch\": return as(\"switch\", parenthesised(), switch_block_()); case \"throw\": return as(\"throw\", prog1(expression, semicolon)); case \"try\": return try_(); case \"var\": return prog1(var_, semicolon); case \"const\": return prog1(const_, semicolon); case \"while\": return as(\"while\", parenthesised(), in_loop(statement)); case \"with\": return as(\"with\", parenthesised(), statement()); default: unexpected(); } } }; function labeled_statement(label) { S.labels.push(label); var start = S.token, stat = statement(); if (exigent_mode && !HOP(STATEMENTS_WITH_LABELS, stat[0])) unexpected(start); S.labels.pop(); return as(\"label\", label, stat); }; function simple_statement() { return as(\"stat\", prog1(expression, semicolon)); }; function break_cont(type) { var name = is(\"name\") ? S.token.value : null; if (name != null) { next(); if (!member(name, S.labels)) croak(\"Label \" + name + \" without matching loop or statement\"); } else if (S.in_loop == 0) croak(type + \" not inside a loop or switch\"); semicolon(); return as(type, name); }; function for_() { expect(\"(\"); var init = null; if (!is(\"punc\", \";\")) { init = is(\"keyword\", \"var\") ? (next(), var_(true)) : expression(true, true); if (is(\"operator\", \"in\")) return for_in(init); } return regular_for(init); }; function regular_for(init) { expect(\";\"); var test = is(\"punc\", \";\") ? null : expression(); expect(\";\"); var step = is(\"punc\", \")\") ? null : expression(); expect(\")\"); return as(\"for\", init, test, step, in_loop(statement)); }; function for_in(init) { var lhs = init[0] == \"var\" ? as(\"name\", init[1][0]) : init; next(); var obj = expression(); expect(\")\"); return as(\"for-in\", init, lhs, obj, in_loop(statement)); }; var function_ = embed_tokens ? function() { var start = prev(); var ast = $function_.apply(this, arguments); ast[0] = add_tokens(ast[0], start, prev()); return ast; } : $function_; function $function_(in_statement) { var name = is(\"name\") ? prog1(S.token.value, next) : null; if (in_statement && !name) unexpected(); expect(\"(\"); return as(in_statement ? \"defun\" : \"function\", name, // arguments (function(first, a){ while (!is(\"punc\", \")\")) { if (first) first = false; else expect(\",\"); if (!is(\"name\")) unexpected(); a.push(S.token.value); next(); } next(); return a; })(true, []), // body (function(){ ++S.in_function; var loop = S.in_loop; S.in_loop = 0; var a = block_(); --S.in_function; S.in_loop = loop; return a; })()); }; function if_() { var cond = parenthesised(), body = statement(), belse; if (is(\"keyword\", \"else\")) { next(); belse = statement(); } return as(\"if\", cond, body, belse); }; function block_() { expect(\"{\"); var a = []; while (!is(\"punc\", \"}\")) { if (is(\"eof\")) unexpected(); a.push(statement()); } next(); return a; }; var switch_block_ = curry(in_loop, function(){ expect(\"{\"); var a = [], cur = null; while (!is(\"punc\", \"}\")) { if (is(\"eof\")) unexpected(); if (is(\"keyword\", \"case\")) { next(); cur = []; a.push([ expression(), cur ]); expect(\":\"); } else if (is(\"keyword\", \"default\")) { next(); expect(\":\"); cur = []; a.push([ null, cur ]); } else { if (!cur) unexpected(); cur.push(statement()); } } next(); return a; }); function try_() { var body = block_(), bcatch, bfinally; if (is(\"keyword\", \"catch\")) { next(); expect(\"(\"); if (!is(\"name\")) croak(\"Name expected\"); var name = S.token.value; next(); expect(\")\"); bcatch = [ name, block_() ]; } if (is(\"keyword\", \"finally\")) { next(); bfinally = block_(); } if (!bcatch && !bfinally) croak(\"Missing catch/finally blocks\"); return as(\"try\", body, bcatch, bfinally); }; function vardefs(no_in) { var a = []; for (;;) { if (!is(\"name\")) unexpected(); var name = S.token.value; next(); if (is(\"operator\", \"=\")) { next(); a.push([ name, expression(false, no_in) ]); } else { a.push([ name ]); } if (!is(\"punc\", \",\")) break; next(); } return a; }; function var_(no_in) { return as(\"var\", vardefs(no_in)); }; function const_() { return as(\"const\", vardefs()); }; function new_() { var newexp = expr_atom(false), args; if (is(\"punc\", \"(\")) { next(); args = expr_list(\")\"); } else { args = []; } return subscripts(as(\"new\", newexp, args), true); }; function expr_atom(allow_calls) { if (is(\"operator\", \"new\")) { next(); return new_(); } if (is(\"operator\") && HOP(UNARY_PREFIX, S.token.value)) { return make_unary(\"unary-prefix\", prog1(S.token.value, next), expr_atom(allow_calls)); } if (is(\"punc\")) { switch (S.token.value) { case \"(\": next(); return subscripts(prog1(expression, curry(expect, \")\")), allow_calls); case \"[\": next(); return subscripts(array_(), allow_calls); case \"{\": next(); return subscripts(object_(), allow_calls); } unexpected(); } if (is(\"keyword\", \"function\")) { next(); return subscripts(function_(false), allow_calls); } if (HOP(ATOMIC_START_TOKEN, S.token.type)) { var atom = S.token.type == \"regexp\" ? as(\"regexp\", S.token.value[0], S.token.value[1]) : as(S.token.type, S.token.value); return subscripts(prog1(atom, next), allow_calls); } unexpected(); }; function expr_list(closing, allow_trailing_comma, allow_empty) { var first = true, a = []; while (!is(\"punc\", closing)) { if (first) first = false; else expect(\",\"); if (allow_trailing_comma && is(\"punc\", closing)) break; if (is(\"punc\", \",\") && allow_empty) { a.push([ \"atom\", \"undefined\" ]); } else { a.push(expression(false)); } } next(); return a; }; function array_() { return as(\"array\", expr_list(\"]\", !exigent_mode, true)); }; function object_() { var first = true, a = []; while (!is(\"punc\", \"}\")) { if (first) first = false; else expect(\",\"); if (!exigent_mode && is(\"punc\", \"}\")) // allow trailing comma break; var type = S.token.type; var name = as_property_name(); if (type == \"name\" && (name == \"get\" || name == \"set\") && !is(\"punc\", \":\")) { a.push([ as_name(), function_(false), name ]); } else { expect(\":\"); a.push([ name, expression(false) ]); } } next(); return as(\"object\", a); }; function as_property_name() { switch (S.token.type) { case \"num\": case \"string\": return prog1(S.token.value, next); } return as_name(); }; function as_name() { switch (S.token.type) { case \"name\": case \"operator\": case \"keyword\": case \"atom\": return prog1(S.token.value, next); default: unexpected(); } }; function subscripts(expr, allow_calls) { if (is(\"punc\", \".\")) { next(); return subscripts(as(\"dot\", expr, as_name()), allow_calls); } if (is(\"punc\", \"[\")) { next(); return subscripts(as(\"sub\", expr, prog1(expression, curry(expect, \"]\"))), allow_calls); } if (allow_calls && is(\"punc\", \"(\")) { next(); return subscripts(as(\"call\", expr, expr_list(\")\")), true); } if (allow_calls && is(\"operator\") && HOP(UNARY_POSTFIX, S.token.value)) { return prog1(curry(make_unary, \"unary-postfix\", S.token.value, expr), next); } return expr; }; function make_unary(tag, op, expr) { if ((op == \"++\" || op == \"--\") && !is_assignable(expr)) croak(\"Invalid use of \" + op + \" operator\"); return as(tag, op, expr); }; function expr_op(left, min_prec, no_in) { var op = is(\"operator\") ? S.token.value : null; if (op && op == \"in\" && no_in) op = null; var prec = op != null ? PRECEDENCE[op] : null; if (prec != null && prec > min_prec) { next(); var right = expr_op(expr_atom(true), prec, no_in); return expr_op(as(\"binary\", op, left, right), min_prec, no_in); } return left; }; function expr_ops(no_in) { return expr_op(expr_atom(true), 0, no_in); }; function maybe_conditional(no_in) { var expr = expr_ops(no_in); if (is(\"operator\", \"?\")) { next(); var yes = expression(false); expect(\":\"); return as(\"conditional\", expr, yes, expression(false, no_in)); } return expr; }; function is_assignable(expr) { if (!exigent_mode) return true; switch (expr[0]) { case \"dot\": case \"sub\": case \"new\": case \"call\": return true; case \"name\": return expr[1] != \"this\"; } }; function maybe_assign(no_in) { var left = maybe_conditional(no_in), val = S.token.value; if (is(\"operator\") && HOP(ASSIGNMENT, val)) { if (is_assignable(left)) { next(); return as(\"assign\", ASSIGNMENT[val], left, maybe_assign(no_in)); } croak(\"Invalid assignment\"); } return left; }; function expression(commas, no_in) { if (arguments.length == 0) commas = true; var expr = maybe_assign(no_in); if (commas && is(\"punc\", \",\")) { next(); return as(\"seq\", expr, expression(true, no_in)); } return expr; }; function in_loop(cont) { try { ++S.in_loop; return cont(); } finally { --S.in_loop; } }; return as(\"toplevel\", (function(a){ while (!is(\"eof\")) a.push(statement()); return a; })([])); }; /* -----[ Utilities ]----- */ function curry(f) { var args = slice(arguments, 1); return function() { return f.apply(this, args.concat(slice(arguments))); }; }; function prog1(ret) { if (ret instanceof Function) ret = ret(); for (var i = 1, n = arguments.length; --n > 0; ++i) arguments[i](); return ret; }; function array_to_hash(a) { var ret = {}; for (var i = 0; i < a.length; ++i) ret[a[i]] = true; return ret; }; function slice(a, start) { return Array.prototype.slice.call(a, start == null ? 0 : start); }; function characters(str) { return str.split(\"\"); }; function member(name, array) { for (var i = array.length; --i >= 0;) if (array[i] === name) return true; return false; }; function HOP(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }; var warn = function() {}; /* -----[ Exports ]----- */ var init = function (root) { if (root.modules[\"parser\"]) { return; } root.parse = parse; root.modules[\"parser\"] = true; } var isCommonJS = (typeof require !== \"undefined\" && typeof module !== \"undefined\" && module.exports); var isAmd = (typeof define !== \"undefined\" && define.amd); if (isCommonJS) { module.exports.init = init; } else if (isAmd) { define(\"jscex-parser\", function () { return { init: init }; }); } else { if (typeof Jscex === \"undefined\") { throw new Error('Missing root object, please load \"jscex\" module first.'); } init(Jscex); } /* scope.tokenizer = tokenizer; scope.parse = parse; scope.slice = slice; scope.curry = curry; scope.member = member; scope.array_to_hash = array_to_hash; scope.PRECEDENCE = PRECEDENCE; scope.KEYWORDS_ATOM = KEYWORDS_ATOM; scope.RESERVED_WORDS = RESERVED_WORDS; scope.KEYWORDS = KEYWORDS; scope.ATOMIC_START_TOKEN = ATOMIC_START_TOKEN; scope.OPERATORS = OPERATORS; scope.is_alphanumeric_char = is_alphanumeric_char; scope.set_logger = function (logger) { warn = logger; }; */ })();"},{"title":"","date":"un22fin22","updated":"un22fin22","comments":true,"path":"lovetest/file/jquery.min.js","permalink":"https://zhou251.top/lovetest/file/jquery.min.js","excerpt":"","text":"/*! jQuery v1.7.1 jquery.com | jquery.org/license */ (function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cv(a){if(!ck[a]){var b=c.body,d=f(\"\").appendTo(b),e=d.css(\"display\");d.remove();if(e===\"none\"||e===\"\"){cl||(cl=c.createElement(\"iframe\"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement)cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode===\"CSS1Compat\"?\"\":\"\")+\"\"),cm.close();d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,\"display\"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a});return c}function ct(){cr=b}function cs(){setTimeout(ct,0);return cr=f.now()}function cj(){try{return new a.ActiveXObject(\"Microsoft.XMLHTTP\")}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g"}],"posts":[{"title":"volantis主题个性化记录","slug":"volantis主题个性化记录","date":"un11fin11","updated":"un22fin22","comments":true,"path":"posts/14591/","link":"","permalink":"https://zhou251.top/posts/14591/","excerpt":"在接触了yilia，next和volantis之后，最终选择了volantis。选择volantis有以下几点原因： 颜值高 易于上手 官方文档写的很详细 在个性化路上参考了几位大佬的博客，他们分别是： TRHX’S BLOG 黑石博客 XU’S BLOG [] 其中，黑石放出了自己魔改的volantis版本，而XU的评论区干货很多，一定要看。","text":"在接触了yilia，next和volantis之后，最终选择了volantis。选择volantis有以下几点原因： 颜值高 易于上手 官方文档写的很详细 在个性化路上参考了几位大佬的博客，他们分别是： TRHX’S BLOG 黑石博客 XU’S BLOG [] 其中，黑石放出了自己魔改的volantis版本，而XU的评论区干货很多，一定要看。 待续","author":"zhou251","categories":[{"name":"教程","slug":"教程","permalink":"https://zhou251.top/categories/%E6%95%99%E7%A8%8B/"},{"name":"博客","slug":"博客","permalink":"https://zhou251.top/categories/%E5%8D%9A%E5%AE%A2/"}],"tags":[{"name":"HEXO","slug":"HEXO","permalink":"https://zhou251.top/tags/HEXO/"},{"name":"VOLANTIS","slug":"VOLANTIS","permalink":"https://zhou251.top/tags/VOLANTIS/"},{"name":"个性化","slug":"个性化","permalink":"https://zhou251.top/tags/%E4%B8%AA%E6%80%A7%E5%8C%96/"}]},{"title":"markdown相关的总结","slug":"Markdown相关的总结","date":"un33fin33","updated":"un22fin22","comments":true,"path":"posts/25796/","link":"","permalink":"https://zhou251.top/posts/25796/","excerpt":"啊还是卡号是付款计划附件红色袈裟理科积分阿克苏贷记卡圣诞节阿萨的咯技术的卡仕达","text":"啊还是卡号是付款计划附件红色袈裟理科积分阿克苏贷记卡圣诞节阿萨的咯技术的卡仕达 标题标准写法：#+空格+标题，#的数量代表标题的级别。 语法： 123456# 一级标题## 二级标题### 三级标题#### 四级标题##### 五级标题###### 六级标题（最小标题） 效果： 正文斜体语法： 12*斜体1*_斜体2_ 效果： 斜体1 斜体2 加粗语法： 12**粗体1**__粗体2__ 效果： 粗体1 粗体2 删除线语法： 1~~删除线~~ 效果： 删除线 另外当需要粗体，斜体，删除线结合只需要将各自语法需要的符号结合写就行，这里举一个范例（三者结合）。 语法： 12***~~粗体斜体删除线1~~***~~***粗体斜体删除线2***~~ 效果： 粗体斜体删除线1粗体斜体删除线2 高亮语法： 12`文本高亮`==文本高亮== 效果： 文本高亮 ==文本高亮==(误) 上标语法： 12&lt;sup&gt;2^&lt;sup&gt; 效果： 22 下标语法： 1H&lt;sub&gt;2&lt;/sub&gt;O 效果： H2O 换行在 Markdown 语法中，换行与换段是不同的概念。Typora换行分为软换行和硬换行。 软换行：你可以通过 Shfit + Enter 完成一次软换行。软换行只在编辑界面可见，当文档被导出时换行会被省略。 效果： 文本第一行文本第二行文本第三行 可以清晰地看到行间距很小。 硬换行：你可以通过空格 + 空格 + Shift + Enter 完成一次硬换行。硬换行在文档被导出时将被保留，且没有换段的段后距。 ‼️通用换行 写gitbook时，使用上述换行方式（硬换行，软换行），发现渲染html时显示不了换行效果，好像简书上渲染也是不行。 语法： 1文本&lt;br/&gt;&lt;br/&gt;文本 效果： 文本 文本 换段你可以通过Enter完成一次换段。 效果： 文本第一行 文本第二行 文本第三行 注意看段间距跟行间距的区别。 分割线语法： 1234---___*** 效果： 引用代码单行代码引用 格式：代码 语法： 1`print(&#x27;hello nick&#x27;)` 效果： print(&#39;hello nick&#39;) 多行代码引用 语法： 1 print(‘hello nick’)print(‘hello nick’)print(‘hello nick’) 1 效果： 123print(&#x27;hello nick&#x27;)print(&#x27;hello nick&#x27;)print(&#x27;hello nick&#x27;) 插入链接直接链接显示 语法： 1&lt;https://baike.baidu.com/item/markdown/3245829?fr=aladdin&gt; 效果： https://baike.baidu.com/item/markdown/3245829?fr=aladdin 行内式链接 格式：[文本]（URL“title”）title可以不要。 语法： 1[markdown百度百科](https://baike.baidu.com/item/markdown/3245829?fr=aladdin) 效果： markdown百度百科 参考式链接 格式： 文本 起码空一行！！！ 123[markdown百度百科][1][1]:https://baike.baidu.com/item/markdown/3245829?fr=aladdin 效果： markdown百度百科 插入图片插入超链接形式 语法: 1![随意](https://dss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1819216937,2118754409&amp;fm=26&amp;gp=0.jpg &#x27;二哈&#x27;) 效果： 插入本地图片 待续。。。我觉得不重要。 引用文字单层引用 语法： 1&gt; 内容 效果： 内容 多层引用 语法： 123&gt; 内容&gt;&gt; 内容&gt;&gt;&gt; 内容 效果： 内容 内容 内容 列表单级无序列表 语法： 123* 示例- 示例+ 示例 注意：示例前面有空格。 效果: 示例 示例 示例 推荐使用 ‘-‘ 多级无序列表 语法： 123* 示例 - 示例 + 示例 注意：示例前面有空格。 效果： 示例 示例 示例 单级有序列表 语法： 1231. 示例2. 示例3. 示例 注意：示例前面有空格。 效果 示例 示例 示例 多级有序列表 语法： 1231. 示例 1. 示例 1. 示例 注意：示例前面有空格。 效果： 示例 示例 示例 表格语法: 1234|姓名|年龄|性别||:-|:-:|-:||李一|7|男||王二|18|男| 第一行表头第二行设置对齐格式，:-左对齐，:-：居中，-：右对齐。 姓名 年龄 性别 李一 7 男 王二 18 男 待办清单格式: *+空格+[空格]+待办事项 语法： 123* [x] 待办清单1* [ ] 待办清单2* [ ] 待办清单3 效果： 待办清单1 待办清单2 待办清单3 绘图参考这个：如何在Markdown中画流程图 数学公式行内嵌 格式：$ 数学公式 $ 语法： 1内嵌数学公式$\\sum_&#123;i=1&#125;^&#123;10&#125;f(i)\\,\\,\\text&#123;thanks&#125;$ 效果： 内嵌数学公式$\\sum_{i=1}^{10}f(i),,\\text{thanks}$ 独立块状公式 格式：$$ 数学公式 $$ 语法： 123$$\\sum_&#123;i=1&#125;^&#123;10&#125;f(i)\\,\\,\\text&#123;thanks&#125;$$ 效果： $$\\sum_{i=1}^{10}f(i),,\\text{thanks}$$ 更多公式使用参考：Cmd Markdown 公式指导手册","author":"zhou251","categories":[{"name":"教程","slug":"教程","permalink":"https://zhou251.top/categories/%E6%95%99%E7%A8%8B/"}],"tags":[{"name":"MARKDOWN","slug":"MARKDOWN","permalink":"https://zhou251.top/tags/MARKDOWN/"},{"name":"写作","slug":"写作","permalink":"https://zhou251.top/tags/%E5%86%99%E4%BD%9C/"}]},{"title":"博文写作注意事项","slug":"博文写作注意事项 - 副本","date":"un22fin22","updated":"un22fin22","comments":true,"path":"posts/10034/","link":"","permalink":"https://zhou251.top/posts/10034/","excerpt":"tags tags添加方法 1234- tag(单一tag)或者- tag1- tag2 哈克都看傻了是假的回复收到回复的红发杰克山东黄金嘎斯的后果hgag阿斯顿噶啥的噶啥的噶当股市大","text":"tags tags添加方法 1234- tag(单一tag)或者- tag1- tag2 哈克都看傻了是假的回复收到回复的红发杰克山东黄金嘎斯的后果hgag阿斯顿噶啥的噶啥的噶当股市大 分类 categories添加方法 12345678910- category（单一分类）- A- B此时，B是A的子类。- [A,B]- [A,C]- [D]此时，B和C是父类A的子类，D则是没有子类的分类","author":"zhou251","categories":[{"name":"教程","slug":"教程","permalink":"https://zhou251.top/categories/%E6%95%99%E7%A8%8B/"}],"tags":[{"name":"写作","slug":"写作","permalink":"https://zhou251.top/tags/%E5%86%99%E4%BD%9C/"},{"name":"BLOG","slug":"BLOG","permalink":"https://zhou251.top/tags/BLOG/"}]}],"categories":[{"name":"教程","slug":"教程","permalink":"https://zhou251.top/categories/%E6%95%99%E7%A8%8B/"},{"name":"博客","slug":"博客","permalink":"https://zhou251.top/categories/%E5%8D%9A%E5%AE%A2/"}],"tags":[{"name":"HEXO","slug":"HEXO","permalink":"https://zhou251.top/tags/HEXO/"},{"name":"VOLANTIS","slug":"VOLANTIS","permalink":"https://zhou251.top/tags/VOLANTIS/"},{"name":"个性化","slug":"个性化","permalink":"https://zhou251.top/tags/%E4%B8%AA%E6%80%A7%E5%8C%96/"},{"name":"MARKDOWN","slug":"MARKDOWN","permalink":"https://zhou251.top/tags/MARKDOWN/"},{"name":"写作","slug":"写作","permalink":"https://zhou251.top/tags/%E5%86%99%E4%BD%9C/"},{"name":"BLOG","slug":"BLOG","permalink":"https://zhou251.top/tags/BLOG/"}]}